"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ae=require("@stablelib/chacha20poly1305"),un=require("@stablelib/hkdf"),ce=require("@stablelib/random"),B=require("@stablelib/sha256"),dn=require("@stablelib/x25519"),d=require("uint8arrays"),ln=require("detect-browser"),R=require("@walletconnect/time"),w=require("@walletconnect/window-getters"),pn=require("@walletconnect/window-metadata"),fn=require("query-string"),mn=require("@walletconnect/relay-api");function ue(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,Object.freeze(n)}var de=ue(dn),D=ue(fn);const $=":";function le(e){const[n,t]=e.split($);return{namespace:n,reference:t}}function pe(e){const{namespace:n,reference:t}=e;return[n,t].join($)}function z(e){const[n,t,r]=e.split($);return{namespace:n,reference:t,address:r}}function fe(e){const{namespace:n,reference:t,address:r}=e;return[n,t,r].join($)}function Y(e,n){const t=[];return e.forEach(r=>{const s=n(r);t.includes(s)||t.push(s)}),t}function me(e){const{address:n}=z(e);return n}function ye(e){const{namespace:n,reference:t}=z(e);return pe({namespace:n,reference:t})}function yn(e,n){const{namespace:t,reference:r}=le(n);return fe({namespace:t,reference:r,address:e})}function gn(e){return Y(e,me)}function ge(e){return Y(e,ye)}function En(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const s=e[r];t.push(...s.accounts)}),t}function hn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const s=e[r];t.push(...ge(s.accounts))}),t}function vn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const s=e[r];t.push(...M(r,s))}),t}function M(e,n){return e.includes(":")?[e]:n.chains||[]}const K=e=>e?.split(":"),Ee=e=>{const n=e&&K(e);if(n)return n[3]},Nn=e=>{const n=e&&K(e);if(n)return n[2]+":"+n[3]},he=e=>{const n=e&&K(e);if(n)return n.pop()},On=(e,n)=>{const t=`${e.domain} wants you to sign in with your Ethereum account:`,r=he(n),s=e.statement,o=`URI: ${e.aud}`,a=`Version: ${e.version}`,l=`Chain ID: ${Ee(n)}`,p=`Nonce: ${e.nonce}`,i=`Issued At: ${e.iat}`,u=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(c=>`- ${c}`).join(`
`)}`:void 0;return[t,r,"",s,"",o,a,l,p,i,u].filter(c=>c!=null).join(`
`)},G="base10",f="base16",k="base64pad",q="utf8",W=0,C=1,bn=0,ve=1,J=12,Q=32;function Sn(){const e=de.generateKeyPair();return{privateKey:d.toString(e.secretKey,f),publicKey:d.toString(e.publicKey,f)}}function An(){const e=ce.randomBytes(Q);return d.toString(e,f)}function Pn(e,n){const t=de.sharedKey(d.fromString(e,f),d.fromString(n,f)),r=new un.HKDF(B.SHA256,t).expand(Q);return d.toString(r,f)}function Tn(e){const n=B.hash(d.fromString(e,f));return d.toString(n,f)}function In(e){const n=B.hash(d.fromString(e,q));return d.toString(n,f)}function Ne(e){return d.fromString(`${e}`,G)}function V(e){return Number(d.toString(e,G))}function Rn(e){const n=Ne(typeof e.type<"u"?e.type:W);if(V(n)===C&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof e.senderPublicKey<"u"?d.fromString(e.senderPublicKey,f):void 0,r=typeof e.iv<"u"?d.fromString(e.iv,f):ce.randomBytes(J),s=new ae.ChaCha20Poly1305(d.fromString(e.symKey,f)).seal(r,d.fromString(e.message,q));return Oe({type:n,sealed:s,iv:r,senderPublicKey:t})}function Cn(e){const n=new ae.ChaCha20Poly1305(d.fromString(e.symKey,f)),{sealed:t,iv:r}=Z(e.encoded),s=n.open(r,t);if(s===null)throw new Error("Failed to decrypt");return d.toString(s,q)}function Oe(e){if(V(e.type)===C){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return d.toString(d.concat([e.type,e.senderPublicKey,e.iv,e.sealed]),k)}return d.toString(d.concat([e.type,e.iv,e.sealed]),k)}function Z(e){const n=d.fromString(e,k),t=n.slice(bn,ve),r=ve;if(V(t)===C){const l=r+Q,p=l+J,i=n.slice(r,l),u=n.slice(l,p),c=n.slice(p);return{type:t,sealed:c,iv:u,senderPublicKey:i}}const s=r+J,o=n.slice(r,s),a=n.slice(s);return{type:t,sealed:a,iv:o}}function _n(e,n){const t=Z(e);return be({type:V(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?d.toString(t.senderPublicKey,f):void 0,receiverPublicKey:n?.receiverPublicKey})}function be(e){const n=e?.type||W;if(n===C){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Un(e){return e.type===C&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var wn=Object.defineProperty,Se=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable,Ae=(e,n,t)=>n in e?wn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Pe=(e,n)=>{for(var t in n||(n={}))Vn.call(n,t)&&Ae(e,t,n[t]);if(Se)for(var t of Se(n))jn.call(n,t)&&Ae(e,t,n[t]);return e};const Te="ReactNative",_={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},F=" ",Dn=":",Ie="/",X=2,$n=1e3,Re="js";function ee(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ce(){return!w.getDocument()&&!!w.getNavigator()&&navigator.product===Te}function _e(){return!ee()&&!!w.getNavigator()}function ne(){return Ce()?_.reactNative:ee()?_.node:_e()?_.browser:_.unknown}function Ue(e,n){let t=D.parse(e);return t=Pe(Pe({},t),n),e=D.stringify(t),e}function Mn(){return pn.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Kn(e,n){var t;const r=ne(),s={protocol:e,version:n,env:r};return r==="browser"&&(s.host=((t=w.getLocation())==null?void 0:t.host)||"unknown"),s}function we(){const e=ln.detect();if(e===null)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[n,e.name,e.version].join("-"):[n,e.version].join("-")}function Ve(){var e;const n=ne();return n===_.browser?[n,((e=w.getLocation())==null?void 0:e.host)||"unknown"].join(":"):n}function je(e,n,t){const r=we(),s=Ve();return[[e,n].join("-"),[Re,t].join("-"),r,s].join("/")}function kn({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:s,projectId:o,useOnCloseEvent:a}){const l=t.split("?"),p=je(e,n,r),i={auth:s,ua:p,projectId:o,useOnCloseEvent:a||void 0},u=Ue(l[1]||"",i);return l[0]+"?"+u}function qn(e){let n=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const t=typeof n<"u"?e.split("://")[1]:e;return n=n==="wss"?"https":"http",[n,t].join("://")}function Fn(e,n,t){if(!e[n]||typeof e[n]!==t)throw new Error(`Missing or invalid "${n}" param`)}function De(e,n=X){return $e(e.split(Ie),n)}function Ln(e){return De(e).join(F)}function N(e,n){return e.filter(t=>n.includes(t)).length===e.length}function $e(e,n=X){return e.slice(Math.max(e.length-n,0))}function xn(e){return Object.fromEntries(e.entries())}function Hn(e){return new Map(Object.entries(e))}function Bn(e,n){const t={};return Object.keys(e).forEach(r=>{t[r]=n(e[r])}),t}const zn=e=>e;function Me(e){return e.trim().replace(/^\w/,n=>n.toUpperCase())}function Yn(e){return e.split(F).map(n=>Me(n)).join(F)}function Gn(e=R.FIVE_MINUTES,n){const t=R.toMiliseconds(e||R.FIVE_MINUTES);let r,s,o;return{resolve:a=>{o&&r&&(clearTimeout(o),r(a))},reject:a=>{o&&s&&(clearTimeout(o),s(a))},done:()=>new Promise((a,l)=>{o=setTimeout(()=>{l(new Error(n))},t),r=a,s=l})}}function Wn(e,n,t){return new Promise(async(r,s)=>{const o=setTimeout(()=>s(new Error(t)),n);try{const a=await e;r(a)}catch(a){s(a)}clearTimeout(o)})}function te(e,n){if(typeof n=="string"&&n.startsWith(`${e}:`))return n;if(e.toLowerCase()==="topic"){if(typeof n!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}else if(e.toLowerCase()==="id"){if(typeof n!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${e}`)}function Jn(e){return te("topic",e)}function Qn(e){return te("id",e)}function Zn(e){const[n,t]=e.split(":"),r={id:void 0,topic:void 0};if(n==="topic"&&typeof t=="string")r.topic=t;else if(n==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);return r}function Xn(e,n){return R.fromMiliseconds((n||Date.now())+R.toMiliseconds(e))}function et(e){return Date.now()>=R.toMiliseconds(e)}function nt(e,n){return`${e}${n?`:${n}`:""}`}function O(e=[],n=[]){return[...new Set([...e,...n])]}const Ke="irn";function tt(e){return e?.relay||{protocol:Ke}}function rt(e){const n=mn.RELAY_JSONRPC[e];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${e}`);return n}var st=Object.defineProperty,ke=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,qe=(e,n,t)=>n in e?st(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,at=(e,n)=>{for(var t in n||(n={}))ot.call(n,t)&&qe(e,t,n[t]);if(ke)for(var t of ke(n))it.call(n,t)&&qe(e,t,n[t]);return e};function Fe(e,n="-"){const t={},r="relay"+n;return Object.keys(e).forEach(s=>{if(s.startsWith(r)){const o=s.replace(r,""),a=e[s];t[o]=a}}),t}function ct(e){const n=e.indexOf(":"),t=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,n),s=e.substring(n+1,t).split("@"),o=typeof t<"u"?e.substring(t):"",a=D.parse(o);return{protocol:r,topic:s[0],version:parseInt(s[1],10),symKey:a.symKey,relay:Fe(a)}}function Le(e,n="-"){const t="relay",r={};return Object.keys(e).forEach(s=>{const o=t+n+s;e[s]&&(r[o]=e[s])}),r}function ut(e){return`${e.protocol}:${e.topic}@${e.version}?`+D.stringify(at({symKey:e.symKey},Le(e.relay)))}var dt=Object.defineProperty,lt=Object.defineProperties,pt=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,He=(e,n,t)=>n in e?dt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,yt=(e,n)=>{for(var t in n||(n={}))ft.call(n,t)&&He(e,t,n[t]);if(xe)for(var t of xe(n))mt.call(n,t)&&He(e,t,n[t]);return e},gt=(e,n)=>lt(e,pt(n));function P(e){const n=[];return e.forEach(t=>{const[r,s]=t.split(":");n.push(`${r}:${s}`)}),n}function Be(e){const n=[];return Object.values(e).forEach(t=>{n.push(...P(t.accounts))}),n}function ze(e,n){const t=[];return Object.values(e).forEach(r=>{P(r.accounts).includes(n)&&t.push(...r.methods)}),t}function Ye(e,n){const t=[];return Object.values(e).forEach(r=>{P(r.accounts).includes(n)&&t.push(...r.events)}),t}function Et(e,n){const t=nn(e,n);if(t)throw new Error(t.message);const r={};for(const[s,o]of Object.entries(e))r[s]={methods:o.methods,events:o.events,chains:o.accounts.map(a=>`${a.split(":")[0]}:${a.split(":")[1]}`)};return r}function ht(e){const{proposal:{requiredNamespaces:n,optionalNamespaces:t={}},supportedNamespaces:r}=e,s=se(n),o=se(t),a={};Object.keys(r).forEach(i=>{const u=r[i].chains,c=r[i].methods,h=r[i].events,I=r[i].accounts;a[i]={chains:u,methods:c,events:h,accounts:I}});const l=rn(n,a,"approve()");if(l)throw new Error(l.message);const p={};return Object.keys(s).forEach(i=>{const u=r[i].chains.filter(E=>{var m,g;return(g=(m=s[i])==null?void 0:m.chains)==null?void 0:g.includes(E)}),c=r[i].methods.filter(E=>{var m,g;return(g=(m=s[i])==null?void 0:m.methods)==null?void 0:g.includes(E)}),h=r[i].events.filter(E=>{var m,g;return(g=(m=s[i])==null?void 0:m.events)==null?void 0:g.includes(E)}),I=u.map(E=>r[i].accounts.filter(m=>m.includes(E))).flat();p[i]={chains:u,methods:c,events:h,accounts:I}}),Object.keys(o).forEach(i=>{var u,c,h,I,E,m;if(!r[i])return;const g=(c=(u=o[i])==null?void 0:u.chains)==null?void 0:c.filter(S=>r[i].chains.includes(S)),on=r[i].methods.filter(S=>{var A,U;return(U=(A=o[i])==null?void 0:A.methods)==null?void 0:U.includes(S)}),an=r[i].events.filter(S=>{var A,U;return(U=(A=o[i])==null?void 0:A.events)==null?void 0:U.includes(S)}),cn=g?.map(S=>r[i].accounts.filter(A=>A.includes(S))).flat();p[i]={chains:O((h=p[i])==null?void 0:h.chains,g),methods:O((I=p[i])==null?void 0:I.methods,on),events:O((E=p[i])==null?void 0:E.events,an),accounts:O((m=p[i])==null?void 0:m.accounts,cn)}}),p}function re(e){return e.includes(":")}function Ge(e){return re(e)?e.split(":")[0]:e}function se(e){var n,t,r;const s={};if(!L(e))return s;for(const[o,a]of Object.entries(e)){const l=re(o)?[o]:a.chains,p=a.methods||[],i=a.events||[],u=Ge(o);s[u]=gt(yt({},s[u]),{chains:O(l,(n=s[u])==null?void 0:n.chains),methods:O(p,(t=s[u])==null?void 0:t.methods),events:O(i,(r=s[u])==null?void 0:r.events)})}return s}const vt={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Nt={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function v(e,n){const{message:t,code:r}=Nt[e];return{message:n?`${t} ${n}`:t,code:r}}function T(e,n){const{message:t,code:r}=vt[e];return{message:n?`${t} ${n}`:t,code:r}}function j(e,n){return Array.isArray(e)?typeof n<"u"&&e.length?e.every(n):!0:!1}function L(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function b(e){return typeof e>"u"}function y(e,n){return n&&b(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function x(e,n){return n&&b(e)?!0:typeof e=="number"&&!isNaN(e)}function Ot(e,n){const{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),s=Object.keys(t);let o=!0;return N(s,r)?(r.forEach(a=>{const{accounts:l,methods:p,events:i}=e.namespaces[a],u=P(l),c=t[a];(!N(M(a,c),u)||!N(c.methods,p)||!N(c.events,i))&&(o=!1)}),o):!1}function H(e){return y(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function We(e){if(y(e,!1)&&e.includes(":")){const n=e.split(":");if(n.length===3){const t=n[0]+":"+n[1];return!!n[2]&&H(t)}}return!1}function bt(e){if(y(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function St(e){var n;return(n=e?.proposer)==null?void 0:n.publicKey}function At(e){return e?.topic}function Pt(e,n){let t=null;return y(e?.publicKey,!1)||(t=v("MISSING_OR_INVALID",`${n} controller public key should be a string`)),t}function oe(e){let n=!0;return j(e)?e.length&&(n=e.every(t=>y(t,!1))):n=!1,n}function Je(e,n,t){let r=null;return j(n)?n.forEach(s=>{r||(!H(s)||!s.includes(e))&&(r=T("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):r=T("UNSUPPORTED_CHAINS",`${t}, chains ${n} should be an array of strings conforming to "namespace:chainId" format`),r}function Qe(e,n){let t=null;return Object.entries(e).forEach(([r,s])=>{if(t)return;const o=Je(r,M(r,s),`${n} requiredNamespace`);o&&(t=o)}),t}function Ze(e,n){let t=null;return j(e)?e.forEach(r=>{t||We(r)||(t=T("UNSUPPORTED_ACCOUNTS",`${n}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=T("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function Xe(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const s=Ze(r?.accounts,`${n} namespace`);s&&(t=s)}),t}function en(e,n){let t=null;return oe(e?.methods)?oe(e?.events)||(t=T("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):t=T("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),t}function ie(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const s=en(r,`${n}, namespace`);s&&(t=s)}),t}function Tt(e,n,t){let r=null;if(e&&L(e)){const s=ie(e,n);s&&(r=s);const o=Qe(e,n);o&&(r=o)}else r=v("MISSING_OR_INVALID",`${n}, ${t} should be an object with data`);return r}function nn(e,n){let t=null;if(e&&L(e)){const r=ie(e,n);r&&(t=r);const s=Xe(e,n);s&&(t=s)}else t=v("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return t}function tn(e){return y(e.protocol,!0)}function It(e,n){let t=!1;return n&&!e?t=!0:e&&j(e)&&e.length&&e.forEach(r=>{t=tn(r)}),t}function Rt(e){return typeof e=="number"}function Ct(e){return typeof e<"u"&&typeof e!==null}function _t(e){return!(!e||typeof e!="object"||!e.code||!x(e.code,!1)||!e.message||!y(e.message,!1))}function Ut(e){return!(b(e)||!y(e.method,!1))}function wt(e){return!(b(e)||b(e.result)&&b(e.error)||!x(e.id,!1)||!y(e.jsonrpc,!1))}function Vt(e){return!(b(e)||!y(e.name,!1))}function jt(e,n){return!(!H(n)||!Be(e).includes(n))}function Dt(e,n,t){return y(t,!1)?ze(e,n).includes(t):!1}function $t(e,n,t){return y(t,!1)?Ye(e,n).includes(t):!1}function rn(e,n,t){let r=null;const s=Mt(e),o=Kt(n),a=Object.keys(s),l=Object.keys(o),p=sn(Object.keys(e)),i=sn(Object.keys(n)),u=p.filter(c=>!i.includes(c));return u.length&&(r=v("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(n).toString()}`)),N(a,l)||(r=v("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${l.toString()}`)),Object.keys(n).forEach(c=>{if(!c.includes(":")||r)return;const h=P(n[c].accounts);h.includes(c)||(r=v("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${c}
        Required: ${c}
        Approved: ${h.toString()}`))}),a.forEach(c=>{r||(N(s[c].methods,o[c].methods)?N(s[c].events,o[c].events)||(r=v("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${c}`)):r=v("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${c}`))}),r}function Mt(e){const n={};return Object.keys(e).forEach(t=>{var r;t.includes(":")?n[t]=e[t]:(r=e[t].chains)==null||r.forEach(s=>{n[s]={methods:e[t].methods,events:e[t].events}})}),n}function sn(e){return[...new Set(e.map(n=>n.includes(":")?n.split(":")[0]:n))]}function Kt(e){const n={};return Object.keys(e).forEach(t=>{if(t.includes(":"))n[t]=e[t];else{const r=P(e[t].accounts);r?.forEach(s=>{n[s]={accounts:e[t].accounts.filter(o=>o.includes(`${s}:`)),methods:e[t].methods,events:e[t].events}})}}),n}function kt(e,n){return x(e,!1)&&e<=n.max&&e>=n.min}exports.BASE10=G,exports.BASE16=f,exports.BASE64=k,exports.COLON=Dn,exports.DEFAULT_DEPTH=X,exports.EMPTY_SPACE=F,exports.ENV_MAP=_,exports.ONE_THOUSAND=$n,exports.REACT_NATIVE_PRODUCT=Te,exports.RELAYER_DEFAULT_PROTOCOL=Ke,exports.SDK_TYPE=Re,exports.SLASH=Ie,exports.TYPE_0=W,exports.TYPE_1=C,exports.UTF8=q,exports.appendToQueryString=Ue,exports.assertType=Fn,exports.buildApprovedNamespaces=ht,exports.calcExpiry=Xn,exports.capitalize=Yn,exports.capitalizeWord=Me,exports.createDelayedPromise=Gn,exports.createExpiringPromise=Wn,exports.decodeTypeByte=V,exports.decrypt=Cn,exports.deriveSymKey=Pn,exports.deserialize=Z,exports.encodeTypeByte=Ne,exports.encrypt=Rn,exports.engineEvent=nt,exports.enumify=zn,exports.formatAccountId=fe,exports.formatAccountWithChain=yn,exports.formatChainId=pe,exports.formatExpirerTarget=te,exports.formatIdTarget=Qn,exports.formatMessage=On,exports.formatMessageContext=Ln,exports.formatRelayParams=Le,exports.formatRelayRpcUrl=kn,exports.formatTopicTarget=Jn,exports.formatUA=je,exports.formatUri=ut,exports.generateKeyPair=Sn,exports.generateRandomBytes32=An,exports.getAccountsChains=P,exports.getAccountsFromNamespaces=En,exports.getAddressFromAccount=me,exports.getAddressesFromAccounts=gn,exports.getAppMetadata=Mn,exports.getChainFromAccount=ye,exports.getChainsFromAccounts=ge,exports.getChainsFromNamespace=M,exports.getChainsFromNamespaces=hn,exports.getChainsFromRequiredNamespaces=vn,exports.getDidAddress=he,exports.getDidAddressSegments=K,exports.getDidChainId=Ee,exports.getEnvironment=ne,exports.getHttpUrl=qn,exports.getInternalError=v,exports.getJavascriptID=Ve,exports.getJavascriptOS=we,exports.getLastItems=$e,exports.getNamespacedDidChainId=Nn,exports.getNamespacesChains=Be,exports.getNamespacesEventsForChainId=Ye,exports.getNamespacesMethodsForChainId=ze,exports.getRelayClientMetadata=Kn,exports.getRelayProtocolApi=rt,exports.getRelayProtocolName=tt,exports.getRequiredNamespacesFromNamespaces=Et,exports.getSdkError=T,exports.getUniqueValues=Y,exports.hasOverlap=N,exports.hashKey=Tn,exports.hashMessage=In,exports.isBrowser=_e,exports.isCaipNamespace=re,exports.isConformingNamespaces=rn,exports.isExpired=et,exports.isNode=ee,exports.isProposalStruct=St,exports.isReactNative=Ce,exports.isSessionCompatible=Ot,exports.isSessionStruct=At,exports.isTypeOneEnvelope=Un,exports.isUndefined=b,exports.isValidAccountId=We,exports.isValidAccounts=Ze,exports.isValidActions=en,exports.isValidArray=j,exports.isValidChainId=H,exports.isValidChains=Je,exports.isValidController=Pt,exports.isValidErrorReason=_t,exports.isValidEvent=Vt,exports.isValidId=Rt,exports.isValidNamespaceAccounts=Xe,exports.isValidNamespaceActions=ie,exports.isValidNamespaceChains=Qe,exports.isValidNamespaceMethodsOrEvents=oe,exports.isValidNamespaces=nn,exports.isValidNamespacesChainId=jt,exports.isValidNamespacesEvent=$t,exports.isValidNamespacesRequest=Dt,exports.isValidNumber=x,exports.isValidObject=L,exports.isValidParams=Ct,exports.isValidRelay=tn,exports.isValidRelays=It,exports.isValidRequest=Ut,exports.isValidRequestExpiry=kt,exports.isValidRequiredNamespaces=Tt,exports.isValidResponse=wt,exports.isValidString=y,exports.isValidUrl=bt,exports.mapEntries=Bn,exports.mapToObj=xn,exports.mergeArrays=O,exports.normalizeNamespaces=se,exports.objToMap=Hn,exports.parseAccountId=z,exports.parseChainId=le,exports.parseContextNames=De,exports.parseExpirerTarget=Zn,exports.parseNamespaceKey=Ge,exports.parseRelayParams=Fe,exports.parseUri=ct,exports.serialize=Oe,exports.validateDecoding=_n,exports.validateEncoding=be;
//# sourceMappingURL=index.cjs.js.map
