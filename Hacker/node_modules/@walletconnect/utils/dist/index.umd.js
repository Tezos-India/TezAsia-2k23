(function(v,Se){typeof exports=="object"&&typeof module<"u"?Se(exports):typeof define=="function"&&define.amd?define(["exports"],Se):(v=typeof globalThis<"u"?globalThis:v||self,Se(v["@walletconnect/utils"]={}))})(this,function(v){"use strict";const Se=":";function Zt(e){const[t,r]=e.split(Se);return{namespace:t,reference:r}}function er(e){const{namespace:t,reference:r}=e;return[t,r].join(Se)}function Dt(e){const[t,r,i]=e.split(Se);return{namespace:t,reference:r,address:i}}function tr(e){const{namespace:t,reference:r,address:i}=e;return[t,r,i].join(Se)}function bt(e,t){const r=[];return e.forEach(i=>{const a=t(i);r.includes(a)||r.push(a)}),r}function rr(e){const{address:t}=Dt(e);return t}function nr(e){const{namespace:t,reference:r}=Dt(e);return er({namespace:t,reference:r})}function Xn(e,t){const{namespace:r,reference:i}=Zt(t);return tr({namespace:r,reference:i,address:e})}function Jn(e){return bt(e,rr)}function ir(e){return bt(e,nr)}function Qn(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...a.accounts)}),r}function Zn(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...ir(a.accounts))}),r}function ei(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...Xe(i,a))}),r}function Xe(e,t){return e.includes(":")?[e]:t.chains||[]}const Je=e=>e?.split(":"),ar=e=>{const t=e&&Je(e);if(t)return t[3]},ti=e=>{const t=e&&Je(e);if(t)return t[2]+":"+t[3]},or=e=>{const t=e&&Je(e);if(t)return t.pop()},ri=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,i=or(t),a=e.statement,u=`URI: ${e.aud}`,b=`Version: ${e.version}`,s=`Chain ID: ${ar(t)}`,d=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,D=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(y=>`- ${y}`).join(`
`)}`:void 0;return[r,i,"",a,"",u,b,s,d,l,D].filter(y=>y!=null).join(`
`)};function sr(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),r}var Et={},Qe={},F={},ur={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,d){var l=s>>>16&65535,D=s&65535,y=d>>>16&65535,m=d&65535;return D*m+(l*m+D*y<<16>>>0)|0}e.mul=Math.imul||t;function r(s,d){return s+d|0}e.add=r;function i(s,d){return s-d|0}e.sub=i;function a(s,d){return s<<d|s>>>32-d}e.rotl=a;function u(s,d){return s<<32-d|s>>>d}e.rotr=u;function b(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s}e.isInteger=Number.isInteger||b,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(s){return e.isInteger(s)&&s>=-e.MAX_SAFE_INTEGER&&s<=e.MAX_SAFE_INTEGER}})(ur),Object.defineProperty(F,"__esModule",{value:!0});var cr=ur;function ni(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}F.readInt16BE=ni;function ii(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}F.readUint16BE=ii;function ai(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}F.readInt16LE=ai;function oi(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}F.readUint16LE=oi;function fr(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}F.writeUint16BE=fr,F.writeInt16BE=fr;function hr(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}F.writeUint16LE=hr,F.writeInt16LE=hr;function vt(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}F.readInt32BE=vt;function yt(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}F.readUint32BE=yt;function gt(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}F.readInt32LE=gt;function mt(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}F.readUint32LE=mt;function Ze(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}F.writeUint32BE=Ze,F.writeInt32BE=Ze;function et(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}F.writeUint32LE=et,F.writeInt32LE=et;function si(e,t){t===void 0&&(t=0);var r=vt(e,t),i=vt(e,t+4);return r*4294967296+i-(i>>31)*4294967296}F.readInt64BE=si;function ui(e,t){t===void 0&&(t=0);var r=yt(e,t),i=yt(e,t+4);return r*4294967296+i}F.readUint64BE=ui;function ci(e,t){t===void 0&&(t=0);var r=gt(e,t),i=gt(e,t+4);return i*4294967296+r-(r>>31)*4294967296}F.readInt64LE=ci;function fi(e,t){t===void 0&&(t=0);var r=mt(e,t),i=mt(e,t+4);return i*4294967296+r}F.readUint64LE=fi;function lr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ze(e/4294967296>>>0,t,r),Ze(e>>>0,t,r+4),t}F.writeUint64BE=lr,F.writeInt64BE=lr;function dr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),et(e>>>0,t,r),et(e/4294967296>>>0,t,r+4),t}F.writeUint64LE=dr,F.writeInt64LE=dr;function hi(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,a=1,u=e/8+r-1;u>=r;u--)i+=t[u]*a,a*=256;return i}F.readUintBE=hi;function li(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,a=1,u=r;u<r+e/8;u++)i+=t[u]*a,a*=256;return i}F.readUintLE=li;function di(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!cr.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var a=1,u=e/8+i-1;u>=i;u--)r[u]=t/a&255,a*=256;return r}F.writeUintBE=di;function _i(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!cr.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var a=1,u=i;u<i+e/8;u++)r[u]=t/a&255,a*=256;return r}F.writeUintLE=_i;function Di(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}F.readFloat32BE=Di;function bi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}F.readFloat32LE=bi;function Ei(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}F.readFloat64BE=Ei;function vi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}F.readFloat64LE=vi;function yi(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e),t}F.writeFloat32BE=yi;function gi(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e,!0),t}F.writeFloat32LE=gi;function mi(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e),t}F.writeFloat64BE=mi;function wi(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e,!0),t}F.writeFloat64LE=wi;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});function pi(e){for(var t=0;t<e.length;t++)e[t]=0;return e}ye.wipe=pi,Object.defineProperty(Qe,"__esModule",{value:!0});var ee=F,wt=ye,Si=20;function Oi(e,t,r){for(var i=1634760805,a=857760878,u=2036477234,b=1797285236,s=r[3]<<24|r[2]<<16|r[1]<<8|r[0],d=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],D=r[15]<<24|r[14]<<16|r[13]<<8|r[12],y=r[19]<<24|r[18]<<16|r[17]<<8|r[16],m=r[23]<<24|r[22]<<16|r[21]<<8|r[20],g=r[27]<<24|r[26]<<16|r[25]<<8|r[24],w=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=t[3]<<24|t[2]<<16|t[1]<<8|t[0],p=t[7]<<24|t[6]<<16|t[5]<<8|t[4],U=t[11]<<24|t[10]<<16|t[9]<<8|t[8],_=t[15]<<24|t[14]<<16|t[13]<<8|t[12],E=i,c=a,f=u,h=b,n=s,o=d,S=l,A=D,T=y,M=m,L=g,j=w,R=O,P=p,C=U,I=_,x=0;x<Si;x+=2)E=E+n|0,R^=E,R=R>>>32-16|R<<16,T=T+R|0,n^=T,n=n>>>32-12|n<<12,c=c+o|0,P^=c,P=P>>>32-16|P<<16,M=M+P|0,o^=M,o=o>>>32-12|o<<12,f=f+S|0,C^=f,C=C>>>32-16|C<<16,L=L+C|0,S^=L,S=S>>>32-12|S<<12,h=h+A|0,I^=h,I=I>>>32-16|I<<16,j=j+I|0,A^=j,A=A>>>32-12|A<<12,f=f+S|0,C^=f,C=C>>>32-8|C<<8,L=L+C|0,S^=L,S=S>>>32-7|S<<7,h=h+A|0,I^=h,I=I>>>32-8|I<<8,j=j+I|0,A^=j,A=A>>>32-7|A<<7,c=c+o|0,P^=c,P=P>>>32-8|P<<8,M=M+P|0,o^=M,o=o>>>32-7|o<<7,E=E+n|0,R^=E,R=R>>>32-8|R<<8,T=T+R|0,n^=T,n=n>>>32-7|n<<7,E=E+o|0,I^=E,I=I>>>32-16|I<<16,L=L+I|0,o^=L,o=o>>>32-12|o<<12,c=c+S|0,R^=c,R=R>>>32-16|R<<16,j=j+R|0,S^=j,S=S>>>32-12|S<<12,f=f+A|0,P^=f,P=P>>>32-16|P<<16,T=T+P|0,A^=T,A=A>>>32-12|A<<12,h=h+n|0,C^=h,C=C>>>32-16|C<<16,M=M+C|0,n^=M,n=n>>>32-12|n<<12,f=f+A|0,P^=f,P=P>>>32-8|P<<8,T=T+P|0,A^=T,A=A>>>32-7|A<<7,h=h+n|0,C^=h,C=C>>>32-8|C<<8,M=M+C|0,n^=M,n=n>>>32-7|n<<7,c=c+S|0,R^=c,R=R>>>32-8|R<<8,j=j+R|0,S^=j,S=S>>>32-7|S<<7,E=E+o|0,I^=E,I=I>>>32-8|I<<8,L=L+I|0,o^=L,o=o>>>32-7|o<<7;ee.writeUint32LE(E+i|0,e,0),ee.writeUint32LE(c+a|0,e,4),ee.writeUint32LE(f+u|0,e,8),ee.writeUint32LE(h+b|0,e,12),ee.writeUint32LE(n+s|0,e,16),ee.writeUint32LE(o+d|0,e,20),ee.writeUint32LE(S+l|0,e,24),ee.writeUint32LE(A+D|0,e,28),ee.writeUint32LE(T+y|0,e,32),ee.writeUint32LE(M+m|0,e,36),ee.writeUint32LE(L+g|0,e,40),ee.writeUint32LE(j+w|0,e,44),ee.writeUint32LE(R+O|0,e,48),ee.writeUint32LE(P+p|0,e,52),ee.writeUint32LE(C+U|0,e,56),ee.writeUint32LE(I+_|0,e,60)}function _r(e,t,r,i,a){if(a===void 0&&(a=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var u,b;if(a===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");u=new Uint8Array(16),b=u.length-t.length,u.set(t,b)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");u=t,b=a}for(var s=new Uint8Array(64),d=0;d<r.length;d+=64){Oi(s,u,e);for(var l=d;l<d+64&&l<r.length;l++)i[l]=r[l]^s[l-d];Ai(u,0,b)}return wt.wipe(s),a===0&&wt.wipe(u),i}Qe.streamXOR=_r;function Ci(e,t,r,i){return i===void 0&&(i=0),wt.wipe(r),_r(e,t,r,r,i)}Qe.stream=Ci;function Ai(e,t,r){for(var i=1;r--;)i=i+(e[t]&255)|0,e[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}var Dr={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});function Ni(e,t,r){return~(e-1)&t|e-1&r}Oe.select=Ni;function Ui(e,t){return(e|0)-(t|0)-1>>>31&1}Oe.lessOrEqual=Ui;function br(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}Oe.compare=br;function Ti(e,t){return e.length===0||t.length===0?!1:br(e,t)!==0}Oe.equal=Ti,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Oe,r=ye;e.DIGEST_LENGTH=16;var i=function(){function b(s){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=s[0]|s[1]<<8;this._r[0]=d&8191;var l=s[2]|s[3]<<8;this._r[1]=(d>>>13|l<<3)&8191;var D=s[4]|s[5]<<8;this._r[2]=(l>>>10|D<<6)&7939;var y=s[6]|s[7]<<8;this._r[3]=(D>>>7|y<<9)&8191;var m=s[8]|s[9]<<8;this._r[4]=(y>>>4|m<<12)&255,this._r[5]=m>>>1&8190;var g=s[10]|s[11]<<8;this._r[6]=(m>>>14|g<<2)&8191;var w=s[12]|s[13]<<8;this._r[7]=(g>>>11|w<<5)&8065;var O=s[14]|s[15]<<8;this._r[8]=(w>>>8|O<<8)&8191,this._r[9]=O>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return b.prototype._blocks=function(s,d,l){for(var D=this._fin?0:2048,y=this._h[0],m=this._h[1],g=this._h[2],w=this._h[3],O=this._h[4],p=this._h[5],U=this._h[6],_=this._h[7],E=this._h[8],c=this._h[9],f=this._r[0],h=this._r[1],n=this._r[2],o=this._r[3],S=this._r[4],A=this._r[5],T=this._r[6],M=this._r[7],L=this._r[8],j=this._r[9];l>=16;){var R=s[d+0]|s[d+1]<<8;y+=R&8191;var P=s[d+2]|s[d+3]<<8;m+=(R>>>13|P<<3)&8191;var C=s[d+4]|s[d+5]<<8;g+=(P>>>10|C<<6)&8191;var I=s[d+6]|s[d+7]<<8;w+=(C>>>7|I<<9)&8191;var x=s[d+8]|s[d+9]<<8;O+=(I>>>4|x<<12)&8191,p+=x>>>1&8191;var Q=s[d+10]|s[d+11]<<8;U+=(x>>>14|Q<<2)&8191;var J=s[d+12]|s[d+13]<<8;_+=(Q>>>11|J<<5)&8191;var X=s[d+14]|s[d+15]<<8;E+=(J>>>8|X<<8)&8191,c+=X>>>5|D;var N=0,B=N;B+=y*f,B+=m*(5*j),B+=g*(5*L),B+=w*(5*M),B+=O*(5*T),N=B>>>13,B&=8191,B+=p*(5*A),B+=U*(5*S),B+=_*(5*o),B+=E*(5*n),B+=c*(5*h),N+=B>>>13,B&=8191;var $=N;$+=y*h,$+=m*f,$+=g*(5*j),$+=w*(5*L),$+=O*(5*M),N=$>>>13,$&=8191,$+=p*(5*T),$+=U*(5*A),$+=_*(5*S),$+=E*(5*o),$+=c*(5*n),N+=$>>>13,$&=8191;var V=N;V+=y*n,V+=m*h,V+=g*f,V+=w*(5*j),V+=O*(5*L),N=V>>>13,V&=8191,V+=p*(5*M),V+=U*(5*T),V+=_*(5*A),V+=E*(5*S),V+=c*(5*o),N+=V>>>13,V&=8191;var H=N;H+=y*o,H+=m*n,H+=g*h,H+=w*f,H+=O*(5*j),N=H>>>13,H&=8191,H+=p*(5*L),H+=U*(5*M),H+=_*(5*T),H+=E*(5*A),H+=c*(5*S),N+=H>>>13,H&=8191;var K=N;K+=y*S,K+=m*o,K+=g*n,K+=w*h,K+=O*f,N=K>>>13,K&=8191,K+=p*(5*j),K+=U*(5*L),K+=_*(5*M),K+=E*(5*T),K+=c*(5*A),N+=K>>>13,K&=8191;var W=N;W+=y*A,W+=m*S,W+=g*o,W+=w*n,W+=O*h,N=W>>>13,W&=8191,W+=p*f,W+=U*(5*j),W+=_*(5*L),W+=E*(5*M),W+=c*(5*T),N+=W>>>13,W&=8191;var q=N;q+=y*T,q+=m*A,q+=g*S,q+=w*o,q+=O*n,N=q>>>13,q&=8191,q+=p*h,q+=U*f,q+=_*(5*j),q+=E*(5*L),q+=c*(5*M),N+=q>>>13,q&=8191;var Y=N;Y+=y*M,Y+=m*T,Y+=g*A,Y+=w*S,Y+=O*o,N=Y>>>13,Y&=8191,Y+=p*n,Y+=U*h,Y+=_*f,Y+=E*(5*j),Y+=c*(5*L),N+=Y>>>13,Y&=8191;var G=N;G+=y*L,G+=m*M,G+=g*T,G+=w*A,G+=O*S,N=G>>>13,G&=8191,G+=p*o,G+=U*n,G+=_*h,G+=E*f,G+=c*(5*j),N+=G>>>13,G&=8191;var k=N;k+=y*j,k+=m*L,k+=g*M,k+=w*T,k+=O*A,N=k>>>13,k&=8191,k+=p*S,k+=U*o,k+=_*n,k+=E*h,k+=c*f,N+=k>>>13,k&=8191,N=(N<<2)+N|0,N=N+B|0,B=N&8191,N=N>>>13,$+=N,y=B,m=$,g=V,w=H,O=K,p=W,U=q,_=Y,E=G,c=k,d+=16,l-=16}this._h[0]=y,this._h[1]=m,this._h[2]=g,this._h[3]=w,this._h[4]=O,this._h[5]=p,this._h[6]=U,this._h[7]=_,this._h[8]=E,this._h[9]=c},b.prototype.finish=function(s,d){d===void 0&&(d=0);var l=new Uint16Array(10),D,y,m,g;if(this._leftover){for(g=this._leftover,this._buffer[g++]=1;g<16;g++)this._buffer[g]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(D=this._h[1]>>>13,this._h[1]&=8191,g=2;g<10;g++)this._h[g]+=D,D=this._h[g]>>>13,this._h[g]&=8191;for(this._h[0]+=D*5,D=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=D,D=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=D,l[0]=this._h[0]+5,D=l[0]>>>13,l[0]&=8191,g=1;g<10;g++)l[g]=this._h[g]+D,D=l[g]>>>13,l[g]&=8191;for(l[9]-=1<<13,y=(D^1)-1,g=0;g<10;g++)l[g]&=y;for(y=~y,g=0;g<10;g++)this._h[g]=this._h[g]&y|l[g];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,m=this._h[0]+this._pad[0],this._h[0]=m&65535,g=1;g<8;g++)m=(this._h[g]+this._pad[g]|0)+(m>>>16)|0,this._h[g]=m&65535;return s[d+0]=this._h[0]>>>0,s[d+1]=this._h[0]>>>8,s[d+2]=this._h[1]>>>0,s[d+3]=this._h[1]>>>8,s[d+4]=this._h[2]>>>0,s[d+5]=this._h[2]>>>8,s[d+6]=this._h[3]>>>0,s[d+7]=this._h[3]>>>8,s[d+8]=this._h[4]>>>0,s[d+9]=this._h[4]>>>8,s[d+10]=this._h[5]>>>0,s[d+11]=this._h[5]>>>8,s[d+12]=this._h[6]>>>0,s[d+13]=this._h[6]>>>8,s[d+14]=this._h[7]>>>0,s[d+15]=this._h[7]>>>8,this._finished=!0,this},b.prototype.update=function(s){var d=0,l=s.length,D;if(this._leftover){D=16-this._leftover,D>l&&(D=l);for(var y=0;y<D;y++)this._buffer[this._leftover+y]=s[d+y];if(l-=D,d+=D,this._leftover+=D,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(D=l-l%16,this._blocks(s,d,D),d+=D,l-=D),l){for(var y=0;y<l;y++)this._buffer[this._leftover+y]=s[d+y];this._leftover+=l}return this},b.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},b.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},b}();e.Poly1305=i;function a(b,s){var d=new i(b);d.update(s);var l=d.digest();return d.clean(),l}e.oneTimeAuth=a;function u(b,s){return b.length!==e.DIGEST_LENGTH||s.length!==e.DIGEST_LENGTH?!1:t.equal(b,s)}e.equal=u}(Dr),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Qe,r=Dr,i=ye,a=F,u=Oe;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var b=new Uint8Array(16),s=function(){function d(l){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,l.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return d.prototype.seal=function(l,D,y,m){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var g=new Uint8Array(16);g.set(l,g.length-l.length);var w=new Uint8Array(32);t.stream(this._key,g,w,4);var O=D.length+this.tagLength,p;if(m){if(m.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");p=m}else p=new Uint8Array(O);return t.streamXOR(this._key,g,D,p,4),this._authenticate(p.subarray(p.length-this.tagLength,p.length),w,p.subarray(0,p.length-this.tagLength),y),i.wipe(g),p},d.prototype.open=function(l,D,y,m){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(D.length<this.tagLength)return null;var g=new Uint8Array(16);g.set(l,g.length-l.length);var w=new Uint8Array(32);t.stream(this._key,g,w,4);var O=new Uint8Array(this.tagLength);if(this._authenticate(O,w,D.subarray(0,D.length-this.tagLength),y),!u.equal(O,D.subarray(D.length-this.tagLength,D.length)))return null;var p=D.length-this.tagLength,U;if(m){if(m.length!==p)throw new Error("ChaCha20Poly1305: incorrect destination length");U=m}else U=new Uint8Array(p);return t.streamXOR(this._key,g,D.subarray(0,D.length-this.tagLength),U,4),i.wipe(g),U},d.prototype.clean=function(){return i.wipe(this._key),this},d.prototype._authenticate=function(l,D,y,m){var g=new r.Poly1305(D);m&&(g.update(m),m.length%16>0&&g.update(b.subarray(m.length%16))),g.update(y),y.length%16>0&&g.update(b.subarray(y.length%16));var w=new Uint8Array(8);m&&a.writeUint64LE(m.length,w),g.update(w),a.writeUint64LE(y.length,w),g.update(w);for(var O=g.digest(),p=0;p<O.length;p++)l[p]=O[p];g.clean(),i.wipe(O),i.wipe(w)},d}();e.ChaCha20Poly1305=s}(Et);var Er={},He={},pt={};Object.defineProperty(pt,"__esModule",{value:!0});function Ii(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}pt.isSerializableHash=Ii,Object.defineProperty(He,"__esModule",{value:!0});var we=pt,Ri=Oe,Pi=ye,vr=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var a=0;a<i.length;a++)i[a]^=54;this._inner.update(i);for(var a=0;a<i.length;a++)i[a]^=106;this._outer.update(i),we.isSerializableHash(this._inner)&&we.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Pi.wipe(i)}return e.prototype.reset=function(){if(!we.isSerializableHash(this._inner)||!we.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){we.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),we.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!we.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!we.isSerializableHash(this._inner)||!we.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!we.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();He.HMAC=vr;function Fi(e,t,r){var i=new vr(e,t);i.update(r);var a=i.digest();return i.clean(),a}He.hmac=Fi,He.equal=Ri.equal,Object.defineProperty(Er,"__esModule",{value:!0});var yr=He,gr=ye,Mi=function(){function e(t,r,i,a){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=a;var u=yr.hmac(this._hash,i,r);this._hmac=new yr.HMAC(t,u),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),gr.wipe(this._buffer),gr.wipe(this._counter),this._bufpos=0},e}(),ji=Er.HKDF=Mi,tt={},rt={},nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.BrowserRandomSource=void 0;const mr=65536;class Li{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let i=0;i<r.length;i+=mr)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,mr)));return r}}nt.BrowserRandomSource=Li;function Bi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var it={},$i={},Vi=Object.freeze({__proto__:null,default:$i}),Hi=sr(Vi);Object.defineProperty(it,"__esModule",{value:!0}),it.NodeRandomSource=void 0;const Ki=ye;class Wi{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Bi<"u"){const t=Hi;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(t);for(let a=0;a<i.length;a++)i[a]=r[a];return(0,Ki.wipe)(r),i}}it.NodeRandomSource=Wi,Object.defineProperty(rt,"__esModule",{value:!0}),rt.SystemRandomSource=void 0;const qi=nt,zi=it;class Yi{constructor(){if(this.isAvailable=!1,this.name="",this._source=new qi.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new zi.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}rt.SystemRandomSource=Yi,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=rt,r=F,i=ye;e.defaultRandomSource=new t.SystemRandomSource;function a(l,D=e.defaultRandomSource){return D.randomBytes(l)}e.randomBytes=a;function u(l=e.defaultRandomSource){const D=a(4,l),y=(0,r.readUint32LE)(D);return(0,i.wipe)(D),y}e.randomUint32=u;const b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(l,D=b,y=e.defaultRandomSource){if(D.length<2)throw new Error("randomString charset is too short");if(D.length>256)throw new Error("randomString charset is too long");let m="";const g=D.length,w=256-256%g;for(;l>0;){const O=a(Math.ceil(l*256/w),y);for(let p=0;p<O.length&&l>0;p++){const U=O[p];U<w&&(m+=D.charAt(U%g),l--)}(0,i.wipe)(O)}return m}e.randomString=s;function d(l,D=b,y=e.defaultRandomSource){const m=Math.ceil(l/(Math.log(D.length)/Math.LN2));return s(m,D,y)}e.randomStringForEntropy=d}(tt);var at={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=F,r=ye;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var i=function(){function s(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},s.prototype.update=function(d,l){if(l===void 0&&(l=d.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var D=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=d[D++],l--;this._bufferLength===this.blockSize&&(u(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(D=u(this._temp,this._state,d,D,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=d[D++],l--;return this},s.prototype.finish=function(d){if(!this._finished){var l=this._bytesHashed,D=this._bufferLength,y=l/536870912|0,m=l<<3,g=l%64<56?64:128;this._buffer[D]=128;for(var w=D+1;w<g-8;w++)this._buffer[w]=0;t.writeUint32BE(y,this._buffer,g-8),t.writeUint32BE(m,this._buffer,g-4),u(this._temp,this._state,this._buffer,0,g),this._finished=!0}for(var w=0;w<this.digestLength/4;w++)t.writeUint32BE(this._state[w],d,w*4);return this},s.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(d){return this._state.set(d.state),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(d){r.wipe(d.state),d.buffer&&r.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},s}();e.SHA256=i;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function u(s,d,l,D,y){for(;y>=64;){for(var m=d[0],g=d[1],w=d[2],O=d[3],p=d[4],U=d[5],_=d[6],E=d[7],c=0;c<16;c++){var f=D+c*4;s[c]=t.readUint32BE(l,f)}for(var c=16;c<64;c++){var h=s[c-2],n=(h>>>17|h<<32-17)^(h>>>19|h<<32-19)^h>>>10;h=s[c-15];var o=(h>>>7|h<<32-7)^(h>>>18|h<<32-18)^h>>>3;s[c]=(n+s[c-7]|0)+(o+s[c-16]|0)}for(var c=0;c<64;c++){var n=(((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&U^~p&_)|0)+(E+(a[c]+s[c]|0)|0)|0,o=((m>>>2|m<<32-2)^(m>>>13|m<<32-13)^(m>>>22|m<<32-22))+(m&g^m&w^g&w)|0;E=_,_=U,U=p,p=O+n|0,O=w,w=g,g=m,m=n+o|0}d[0]+=m,d[1]+=g,d[2]+=w,d[3]+=O,d[4]+=p,d[5]+=U,d[6]+=_,d[7]+=E,D+=64,y-=64}return D}function b(s){var d=new i;d.update(s);var l=d.digest();return d.clean(),l}e.hash=b})(at);var St={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const t=tt,r=ye;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function i(c){const f=new Float64Array(16);if(c)for(let h=0;h<c.length;h++)f[h]=c[h];return f}const a=new Uint8Array(32);a[0]=9;const u=i([56129,1]);function b(c){let f=1;for(let h=0;h<16;h++){let n=c[h]+f+65535;f=Math.floor(n/65536),c[h]=n-f*65536}c[0]+=f-1+37*(f-1)}function s(c,f,h){const n=~(h-1);for(let o=0;o<16;o++){const S=n&(c[o]^f[o]);c[o]^=S,f[o]^=S}}function d(c,f){const h=i(),n=i();for(let o=0;o<16;o++)n[o]=f[o];b(n),b(n),b(n);for(let o=0;o<2;o++){h[0]=n[0]-65517;for(let A=1;A<15;A++)h[A]=n[A]-65535-(h[A-1]>>16&1),h[A-1]&=65535;h[15]=n[15]-32767-(h[14]>>16&1);const S=h[15]>>16&1;h[14]&=65535,s(n,h,1-S)}for(let o=0;o<16;o++)c[2*o]=n[o]&255,c[2*o+1]=n[o]>>8}function l(c,f){for(let h=0;h<16;h++)c[h]=f[2*h]+(f[2*h+1]<<8);c[15]&=32767}function D(c,f,h){for(let n=0;n<16;n++)c[n]=f[n]+h[n]}function y(c,f,h){for(let n=0;n<16;n++)c[n]=f[n]-h[n]}function m(c,f,h){let n,o,S=0,A=0,T=0,M=0,L=0,j=0,R=0,P=0,C=0,I=0,x=0,Q=0,J=0,X=0,N=0,B=0,$=0,V=0,H=0,K=0,W=0,q=0,Y=0,G=0,k=0,Me=0,Ve=0,ke=0,_t=0,Qt=0,kn=0,te=h[0],re=h[1],ne=h[2],ie=h[3],ae=h[4],oe=h[5],se=h[6],ue=h[7],ce=h[8],fe=h[9],he=h[10],le=h[11],de=h[12],_e=h[13],De=h[14],be=h[15];n=f[0],S+=n*te,A+=n*re,T+=n*ne,M+=n*ie,L+=n*ae,j+=n*oe,R+=n*se,P+=n*ue,C+=n*ce,I+=n*fe,x+=n*he,Q+=n*le,J+=n*de,X+=n*_e,N+=n*De,B+=n*be,n=f[1],A+=n*te,T+=n*re,M+=n*ne,L+=n*ie,j+=n*ae,R+=n*oe,P+=n*se,C+=n*ue,I+=n*ce,x+=n*fe,Q+=n*he,J+=n*le,X+=n*de,N+=n*_e,B+=n*De,$+=n*be,n=f[2],T+=n*te,M+=n*re,L+=n*ne,j+=n*ie,R+=n*ae,P+=n*oe,C+=n*se,I+=n*ue,x+=n*ce,Q+=n*fe,J+=n*he,X+=n*le,N+=n*de,B+=n*_e,$+=n*De,V+=n*be,n=f[3],M+=n*te,L+=n*re,j+=n*ne,R+=n*ie,P+=n*ae,C+=n*oe,I+=n*se,x+=n*ue,Q+=n*ce,J+=n*fe,X+=n*he,N+=n*le,B+=n*de,$+=n*_e,V+=n*De,H+=n*be,n=f[4],L+=n*te,j+=n*re,R+=n*ne,P+=n*ie,C+=n*ae,I+=n*oe,x+=n*se,Q+=n*ue,J+=n*ce,X+=n*fe,N+=n*he,B+=n*le,$+=n*de,V+=n*_e,H+=n*De,K+=n*be,n=f[5],j+=n*te,R+=n*re,P+=n*ne,C+=n*ie,I+=n*ae,x+=n*oe,Q+=n*se,J+=n*ue,X+=n*ce,N+=n*fe,B+=n*he,$+=n*le,V+=n*de,H+=n*_e,K+=n*De,W+=n*be,n=f[6],R+=n*te,P+=n*re,C+=n*ne,I+=n*ie,x+=n*ae,Q+=n*oe,J+=n*se,X+=n*ue,N+=n*ce,B+=n*fe,$+=n*he,V+=n*le,H+=n*de,K+=n*_e,W+=n*De,q+=n*be,n=f[7],P+=n*te,C+=n*re,I+=n*ne,x+=n*ie,Q+=n*ae,J+=n*oe,X+=n*se,N+=n*ue,B+=n*ce,$+=n*fe,V+=n*he,H+=n*le,K+=n*de,W+=n*_e,q+=n*De,Y+=n*be,n=f[8],C+=n*te,I+=n*re,x+=n*ne,Q+=n*ie,J+=n*ae,X+=n*oe,N+=n*se,B+=n*ue,$+=n*ce,V+=n*fe,H+=n*he,K+=n*le,W+=n*de,q+=n*_e,Y+=n*De,G+=n*be,n=f[9],I+=n*te,x+=n*re,Q+=n*ne,J+=n*ie,X+=n*ae,N+=n*oe,B+=n*se,$+=n*ue,V+=n*ce,H+=n*fe,K+=n*he,W+=n*le,q+=n*de,Y+=n*_e,G+=n*De,k+=n*be,n=f[10],x+=n*te,Q+=n*re,J+=n*ne,X+=n*ie,N+=n*ae,B+=n*oe,$+=n*se,V+=n*ue,H+=n*ce,K+=n*fe,W+=n*he,q+=n*le,Y+=n*de,G+=n*_e,k+=n*De,Me+=n*be,n=f[11],Q+=n*te,J+=n*re,X+=n*ne,N+=n*ie,B+=n*ae,$+=n*oe,V+=n*se,H+=n*ue,K+=n*ce,W+=n*fe,q+=n*he,Y+=n*le,G+=n*de,k+=n*_e,Me+=n*De,Ve+=n*be,n=f[12],J+=n*te,X+=n*re,N+=n*ne,B+=n*ie,$+=n*ae,V+=n*oe,H+=n*se,K+=n*ue,W+=n*ce,q+=n*fe,Y+=n*he,G+=n*le,k+=n*de,Me+=n*_e,Ve+=n*De,ke+=n*be,n=f[13],X+=n*te,N+=n*re,B+=n*ne,$+=n*ie,V+=n*ae,H+=n*oe,K+=n*se,W+=n*ue,q+=n*ce,Y+=n*fe,G+=n*he,k+=n*le,Me+=n*de,Ve+=n*_e,ke+=n*De,_t+=n*be,n=f[14],N+=n*te,B+=n*re,$+=n*ne,V+=n*ie,H+=n*ae,K+=n*oe,W+=n*se,q+=n*ue,Y+=n*ce,G+=n*fe,k+=n*he,Me+=n*le,Ve+=n*de,ke+=n*_e,_t+=n*De,Qt+=n*be,n=f[15],B+=n*te,$+=n*re,V+=n*ne,H+=n*ie,K+=n*ae,W+=n*oe,q+=n*se,Y+=n*ue,G+=n*ce,k+=n*fe,Me+=n*he,Ve+=n*le,ke+=n*de,_t+=n*_e,Qt+=n*De,kn+=n*be,S+=38*$,A+=38*V,T+=38*H,M+=38*K,L+=38*W,j+=38*q,R+=38*Y,P+=38*G,C+=38*k,I+=38*Me,x+=38*Ve,Q+=38*ke,J+=38*_t,X+=38*Qt,N+=38*kn,o=1,n=S+o+65535,o=Math.floor(n/65536),S=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=M+o+65535,o=Math.floor(n/65536),M=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=P+o+65535,o=Math.floor(n/65536),P=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=x+o+65535,o=Math.floor(n/65536),x=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=X+o+65535,o=Math.floor(n/65536),X=n-o*65536,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,S+=o-1+37*(o-1),o=1,n=S+o+65535,o=Math.floor(n/65536),S=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=M+o+65535,o=Math.floor(n/65536),M=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=P+o+65535,o=Math.floor(n/65536),P=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=x+o+65535,o=Math.floor(n/65536),x=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=X+o+65535,o=Math.floor(n/65536),X=n-o*65536,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,S+=o-1+37*(o-1),c[0]=S,c[1]=A,c[2]=T,c[3]=M,c[4]=L,c[5]=j,c[6]=R,c[7]=P,c[8]=C,c[9]=I,c[10]=x,c[11]=Q,c[12]=J,c[13]=X,c[14]=N,c[15]=B}function g(c,f){m(c,f,f)}function w(c,f){const h=i();for(let n=0;n<16;n++)h[n]=f[n];for(let n=253;n>=0;n--)g(h,h),n!==2&&n!==4&&m(h,h,f);for(let n=0;n<16;n++)c[n]=h[n]}function O(c,f){const h=new Uint8Array(32),n=new Float64Array(80),o=i(),S=i(),A=i(),T=i(),M=i(),L=i();for(let C=0;C<31;C++)h[C]=c[C];h[31]=c[31]&127|64,h[0]&=248,l(n,f);for(let C=0;C<16;C++)S[C]=n[C];o[0]=T[0]=1;for(let C=254;C>=0;--C){const I=h[C>>>3]>>>(C&7)&1;s(o,S,I),s(A,T,I),D(M,o,A),y(o,o,A),D(A,S,T),y(S,S,T),g(T,M),g(L,o),m(o,A,o),m(A,S,M),D(M,o,A),y(o,o,A),g(S,o),y(A,T,L),m(o,A,u),D(o,o,T),m(A,A,o),m(o,T,L),m(T,S,n),g(S,M),s(o,S,I),s(A,T,I)}for(let C=0;C<16;C++)n[C+16]=o[C],n[C+32]=A[C],n[C+48]=S[C],n[C+64]=T[C];const j=n.subarray(32),R=n.subarray(16);w(j,j),m(R,R,j);const P=new Uint8Array(32);return d(P,R),P}e.scalarMult=O;function p(c){return O(c,a)}e.scalarMultBase=p;function U(c){if(c.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const f=new Uint8Array(c);return{publicKey:p(f),secretKey:f}}e.generateKeyPairFromSeed=U;function _(c){const f=(0,t.randomBytes)(32,c),h=U(f);return(0,r.wipe)(f),h}e.generateKeyPair=_;function E(c,f,h=!1){if(c.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(f.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const n=O(c,f);if(h){let o=0;for(let S=0;S<n.length;S++)o|=n[S];if(o===0)throw new Error("X25519: invalid shared key")}return n}e.sharedKey=E})(St);function wr(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function pr(e,t){t||(t=e.reduce((a,u)=>a+u.length,0));const r=wr(t);let i=0;for(const a of e)r.set(a,i),i+=a.length;return r}function Gi(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var a=0;a<e.length;a++){var u=e.charAt(a),b=u.charCodeAt(0);if(r[b]!==255)throw new TypeError(u+" is ambiguous");r[b]=a}var s=e.length,d=e.charAt(0),l=Math.log(s)/Math.log(256),D=Math.log(256)/Math.log(s);function y(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var O=0,p=0,U=0,_=w.length;U!==_&&w[U]===0;)U++,O++;for(var E=(_-U)*D+1>>>0,c=new Uint8Array(E);U!==_;){for(var f=w[U],h=0,n=E-1;(f!==0||h<p)&&n!==-1;n--,h++)f+=256*c[n]>>>0,c[n]=f%s>>>0,f=f/s>>>0;if(f!==0)throw new Error("Non-zero carry");p=h,U++}for(var o=E-p;o!==E&&c[o]===0;)o++;for(var S=d.repeat(O);o<E;++o)S+=e.charAt(c[o]);return S}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var O=0;if(w[O]!==" "){for(var p=0,U=0;w[O]===d;)p++,O++;for(var _=(w.length-O)*l+1>>>0,E=new Uint8Array(_);w[O];){var c=r[w.charCodeAt(O)];if(c===255)return;for(var f=0,h=_-1;(c!==0||f<U)&&h!==-1;h--,f++)c+=s*E[h]>>>0,E[h]=c%256>>>0,c=c/256>>>0;if(c!==0)throw new Error("Non-zero carry");U=f,O++}if(w[O]!==" "){for(var n=_-U;n!==_&&E[n]===0;)n++;for(var o=new Uint8Array(p+(_-n)),S=p;n!==_;)o[S++]=E[n++];return o}}}function g(w){var O=m(w);if(O)return O;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:m,decode:g}}var xi=Gi,ki=xi;const Sr=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Xi=e=>new TextEncoder().encode(e),Ji=e=>new TextDecoder().decode(e);class Qi{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Zi{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Or(this,t)}}class ea{constructor(t){this.decoders=t}or(t){return Or(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Or=(e,t)=>new ea({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ta{constructor(t,r,i,a){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=a,this.encoder=new Qi(t,r,i),this.decoder=new Zi(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ot=({name:e,prefix:t,encode:r,decode:i})=>new ta(e,t,r,i),Ke=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:a}=ki(r,t);return ot({prefix:e,name:t,encode:i,decode:u=>Sr(a(u))})},ra=(e,t,r,i)=>{const a={};for(let D=0;D<t.length;++D)a[t[D]]=D;let u=e.length;for(;e[u-1]==="=";)--u;const b=new Uint8Array(u*r/8|0);let s=0,d=0,l=0;for(let D=0;D<u;++D){const y=a[e[D]];if(y===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<r|y,s+=r,s>=8&&(s-=8,b[l++]=255&d>>s)}if(s>=r||255&d<<8-s)throw new SyntaxError("Unexpected end of data");return b},na=(e,t,r)=>{const i=t[t.length-1]==="=",a=(1<<r)-1;let u="",b=0,s=0;for(let d=0;d<e.length;++d)for(s=s<<8|e[d],b+=8;b>r;)b-=r,u+=t[a&s>>b];if(b&&(u+=t[a&s<<r-b]),i)for(;u.length*r&7;)u+="=";return u},Z=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>ot({prefix:t,name:e,encode(a){return na(a,i,r)},decode(a){return ra(a,i,r,e)}}),ia=ot({prefix:"\0",name:"identity",encode:e=>Ji(e),decode:e=>Xi(e)});var aa=Object.freeze({__proto__:null,identity:ia});const oa=Z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var sa=Object.freeze({__proto__:null,base2:oa});const ua=Z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ca=Object.freeze({__proto__:null,base8:ua});const fa=Ke({prefix:"9",name:"base10",alphabet:"0123456789"});var ha=Object.freeze({__proto__:null,base10:fa});const la=Z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),da=Z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _a=Object.freeze({__proto__:null,base16:la,base16upper:da});const Da=Z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ba=Z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ea=Z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),va=Z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ya=Z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ga=Z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ma=Z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wa=Z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pa=Z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Sa=Object.freeze({__proto__:null,base32:Da,base32upper:ba,base32pad:Ea,base32padupper:va,base32hex:ya,base32hexupper:ga,base32hexpad:ma,base32hexpadupper:wa,base32z:pa});const Oa=Ke({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ca=Ke({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Aa=Object.freeze({__proto__:null,base36:Oa,base36upper:Ca});const Na=Ke({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ua=Ke({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ta=Object.freeze({__proto__:null,base58btc:Na,base58flickr:Ua});const Ia=Z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ra=Z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pa=Z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fa=Z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ma=Object.freeze({__proto__:null,base64:Ia,base64pad:Ra,base64url:Pa,base64urlpad:Fa});const Cr=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ja=Cr.reduce((e,t,r)=>(e[r]=t,e),[]),La=Cr.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Ba(e){return e.reduce((t,r)=>(t+=ja[r],t),"")}function $a(e){const t=[];for(const r of e){const i=La[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const Va=ot({prefix:"\u{1F680}",name:"base256emoji",encode:Ba,decode:$a});var Ha=Object.freeze({__proto__:null,base256emoji:Va}),Ka=Nr,Ar=128,Wa=127,qa=~Wa,za=Math.pow(2,31);function Nr(e,t,r){t=t||[],r=r||0;for(var i=r;e>=za;)t[r++]=e&255|Ar,e/=128;for(;e&qa;)t[r++]=e&255|Ar,e>>>=7;return t[r]=e|0,Nr.bytes=r-i+1,t}var Ya=Ot,Ga=128,Ur=127;function Ot(e,i){var r=0,i=i||0,a=0,u=i,b,s=e.length;do{if(u>=s)throw Ot.bytes=0,new RangeError("Could not decode varint");b=e[u++],r+=a<28?(b&Ur)<<a:(b&Ur)*Math.pow(2,a),a+=7}while(b>=Ga);return Ot.bytes=u-i,r}var xa=Math.pow(2,7),ka=Math.pow(2,14),Xa=Math.pow(2,21),Ja=Math.pow(2,28),Qa=Math.pow(2,35),Za=Math.pow(2,42),eo=Math.pow(2,49),to=Math.pow(2,56),ro=Math.pow(2,63),no=function(e){return e<xa?1:e<ka?2:e<Xa?3:e<Ja?4:e<Qa?5:e<Za?6:e<eo?7:e<to?8:e<ro?9:10},io={encode:Ka,decode:Ya,encodingLength:no},Tr=io;const Ir=(e,t,r=0)=>(Tr.encode(e,t,r),t),Rr=e=>Tr.encodingLength(e),Ct=(e,t)=>{const r=t.byteLength,i=Rr(e),a=i+Rr(r),u=new Uint8Array(a+r);return Ir(e,u,0),Ir(r,u,i),u.set(t,a),new ao(e,r,t,u)};class ao{constructor(t,r,i,a){this.code=t,this.size=r,this.digest=i,this.bytes=a}}const Pr=({name:e,code:t,encode:r})=>new oo(e,t,r);class oo{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Ct(this.code,r):r.then(i=>Ct(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Fr=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),so=Pr({name:"sha2-256",code:18,encode:Fr("SHA-256")}),uo=Pr({name:"sha2-512",code:19,encode:Fr("SHA-512")});var co=Object.freeze({__proto__:null,sha256:so,sha512:uo});const Mr=0,fo="identity",jr=Sr;var ho=Object.freeze({__proto__:null,identity:{code:Mr,name:fo,encode:jr,digest:e=>Ct(Mr,jr(e))}});new TextEncoder,new TextDecoder;const Lr={...aa,...sa,...ca,...ha,..._a,...Sa,...Aa,...Ta,...Ma,...Ha};({...co,...ho});function Br(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const $r=Br("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),At=Br("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=wr(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Vr={utf8:$r,"utf-8":$r,hex:Lr.base16,latin1:At,ascii:At,binary:At,...Lr};function ge(e,t="utf8"){const r=Vr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function me(e,t="utf8"){const r=Vr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}const Nt="base10",Ee="base16",st="base64pad",ut="utf8",Ut=0,je=1,lo=0,Hr=1,Tt=12,It=32;function _o(){const e=St.generateKeyPair();return{privateKey:me(e.secretKey,Ee),publicKey:me(e.publicKey,Ee)}}function Do(){const e=tt.randomBytes(It);return me(e,Ee)}function bo(e,t){const r=St.sharedKey(ge(e,Ee),ge(t,Ee)),i=new ji(at.SHA256,r).expand(It);return me(i,Ee)}function Eo(e){const t=at.hash(ge(e,Ee));return me(t,Ee)}function vo(e){const t=at.hash(ge(e,ut));return me(t,Ee)}function Kr(e){return ge(`${e}`,Nt)}function We(e){return Number(me(e,Nt))}function yo(e){const t=Kr(typeof e.type<"u"?e.type:Ut);if(We(t)===je&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?ge(e.senderPublicKey,Ee):void 0,i=typeof e.iv<"u"?ge(e.iv,Ee):tt.randomBytes(Tt),a=new Et.ChaCha20Poly1305(ge(e.symKey,Ee)).seal(i,ge(e.message,ut));return Wr({type:t,sealed:a,iv:i,senderPublicKey:r})}function go(e){const t=new Et.ChaCha20Poly1305(ge(e.symKey,Ee)),{sealed:r,iv:i}=Rt(e.encoded),a=t.open(i,r);if(a===null)throw new Error("Failed to decrypt");return me(a,ut)}function Wr(e){if(We(e.type)===je){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return me(pr([e.type,e.senderPublicKey,e.iv,e.sealed]),st)}return me(pr([e.type,e.iv,e.sealed]),st)}function Rt(e){const t=ge(e,st),r=t.slice(lo,Hr),i=Hr;if(We(r)===je){const s=i+It,d=s+Tt,l=t.slice(i,s),D=t.slice(s,d),y=t.slice(d);return{type:r,sealed:y,iv:D,senderPublicKey:l}}const a=i+Tt,u=t.slice(i,a),b=t.slice(a);return{type:r,sealed:b,iv:u}}function mo(e,t){const r=Rt(e);return qr({type:We(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?me(r.senderPublicKey,Ee):void 0,receiverPublicKey:t?.receiverPublicKey})}function qr(e){const t=e?.type||Ut;if(t===je){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function wo(e){return e.type===je&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var zr=function(e,t,r){if(r||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},po=function(){function e(t,r,i){this.name=t,this.version=r,this.os=i,this.type="browser"}return e}(),So=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),Oo=function(){function e(t,r,i,a){this.name=t,this.version=r,this.os=i,this.bot=a,this.type="bot-device"}return e}(),Co=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),Ao=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),No=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Uo=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Yr=3,To=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",No]],Gr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Io(e){return e?xr(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ao:typeof navigator<"u"?xr(navigator.userAgent):Fo()}function Ro(e){return e!==""&&To.reduce(function(t,r){var i=r[0],a=r[1];if(t)return t;var u=a.exec(e);return!!u&&[i,u]},!1)}function xr(e){var t=Ro(e);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new Co;var a=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);a?a.length<Yr&&(a=zr(zr([],a,!0),Mo(Yr-a.length),!0)):a=[];var u=a.join("."),b=Po(e),s=Uo.exec(e);return s&&s[1]?new Oo(r,u,b,s[1]):new po(r,u,b)}function Po(e){for(var t=0,r=Gr.length;t<r;t++){var i=Gr[t],a=i[0],u=i[1],b=u.exec(e);if(b)return a}return null}function Fo(){var e=typeof process<"u"&&process.version;return e?new So(process.version.slice(1)):null}function Mo(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Ue={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Pt=function(e,t){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},Pt(e,t)};function jo(e,t){Pt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ft=function(){return Ft=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Ft.apply(this,arguments)};function Lo(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r}function Bo(e,t,r,i){var a=arguments.length,u=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(b=e[s])&&(u=(a<3?b(u):a>3?b(t,r,u):b(t,r))||u);return a>3&&u&&Object.defineProperty(t,r,u),u}function $o(e,t){return function(r,i){t(r,i,e)}}function Vo(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ho(e,t,r,i){function a(u){return u instanceof r?u:new r(function(b){b(u)})}return new(r||(r=Promise))(function(u,b){function s(D){try{l(i.next(D))}catch(y){b(y)}}function d(D){try{l(i.throw(D))}catch(y){b(y)}}function l(D){D.done?u(D.value):a(D.value).then(s,d)}l((i=i.apply(e,t||[])).next())})}function Ko(e,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,b;return b={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function s(l){return function(D){return d([l,D])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(u=l[0]&2?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[l[0]&2,u.value]),l[0]){case 0:case 1:u=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!u||l[1]>u[0]&&l[1]<u[3])){r.label=l[1];break}if(l[0]===6&&r.label<u[1]){r.label=u[1],u=l;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(l);break}u[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(D){l=[6,D],a=0}finally{i=u=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Wo(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}function qo(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Mt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function kr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),a,u=[],b;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)u.push(a.value)}catch(s){b={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(b)throw b.error}}return u}function zo(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(kr(arguments[t]));return e}function Yo(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<r;t++)for(var u=arguments[t],b=0,s=u.length;b<s;b++,a++)i[a]=u[b];return i}function qe(e){return this instanceof qe?(this.v=e,this):new qe(e)}function Go(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),a,u=[];return a={},b("next"),b("throw"),b("return"),a[Symbol.asyncIterator]=function(){return this},a;function b(m){i[m]&&(a[m]=function(g){return new Promise(function(w,O){u.push([m,g,w,O])>1||s(m,g)})})}function s(m,g){try{d(i[m](g))}catch(w){y(u[0][3],w)}}function d(m){m.value instanceof qe?Promise.resolve(m.value.v).then(l,D):y(u[0][2],m)}function l(m){s("next",m)}function D(m){s("throw",m)}function y(m,g){m(g),u.shift(),u.length&&s(u[0][0],u[0][1])}}function xo(e){var t,r;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,u){t[a]=e[a]?function(b){return(r=!r)?{value:qe(e[a](b)),done:a==="return"}:u?u(b):b}:u}}function ko(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Mt=="function"?Mt(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(u){r[u]=e[u]&&function(b){return new Promise(function(s,d){b=e[u](b),a(s,d,b.done,b.value)})}}function a(u,b,s,d){Promise.resolve(d).then(function(l){u({value:l,done:s})},b)}}function Xo(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Jo(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Qo(e){return e&&e.__esModule?e:{default:e}}function Zo(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function es(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var ts=Object.freeze({__proto__:null,__extends:jo,get __assign(){return Ft},__rest:Lo,__decorate:Bo,__param:$o,__metadata:Vo,__awaiter:Ho,__generator:Ko,__createBinding:Wo,__exportStar:qo,__values:Mt,__read:kr,__spread:zo,__spreadArrays:Yo,__await:qe,__asyncGenerator:Go,__asyncDelegator:xo,__asyncValues:ko,__makeTemplateObject:Xo,__importStar:Jo,__importDefault:Qo,__classPrivateFieldGet:Zo,__classPrivateFieldSet:es}),ct=sr(ts),jt={},ze={},Xr;function rs(){if(Xr)return ze;Xr=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return ze.delay=e,ze}var Te={},Lt={},Ie={},Jr;function ns(){return Jr||(Jr=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.ONE_THOUSAND=Ie.ONE_HUNDRED=void 0,Ie.ONE_HUNDRED=100,Ie.ONE_THOUSAND=1e3),Ie}var Bt={},Qr;function is(){return Qr||(Qr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(Bt)),Bt}var Zr;function en(){return Zr||(Zr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ct;t.__exportStar(ns(),e),t.__exportStar(is(),e)}(Lt)),Lt}var tn;function as(){if(tn)return Te;tn=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.fromMiliseconds=Te.toMiliseconds=void 0;const e=en();function t(i){return i*e.ONE_THOUSAND}Te.toMiliseconds=t;function r(i){return Math.floor(i/e.ONE_THOUSAND)}return Te.fromMiliseconds=r,Te}var rn;function os(){return rn||(rn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ct;t.__exportStar(rs(),e),t.__exportStar(as(),e)}(jt)),jt}var Le={},nn;function ss(){if(nn)return Le;nn=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:a})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return Le.Watch=e,Le.default=e,Le}var $t={},Ye={},an;function us(){if(an)return Ye;an=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.IWatch=void 0;class e{}return Ye.IWatch=e,Ye}var on;function cs(){return on||(on=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),ct.__exportStar(us(),e)}($t)),$t}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ct;t.__exportStar(os(),e),t.__exportStar(ss(),e),t.__exportStar(cs(),e),t.__exportStar(en(),e)})(Ue);var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.getLocalStorage=z.getLocalStorageOrThrow=z.getCrypto=z.getCryptoOrThrow=Ht=z.getLocation=z.getLocationOrThrow=Vt=z.getNavigator=z.getNavigatorOrThrow=sn=z.getDocument=z.getDocumentOrThrow=z.getFromWindowOrThrow=z.getFromWindow=void 0;function Re(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}z.getFromWindow=Re;function Be(e){const t=Re(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}z.getFromWindowOrThrow=Be;function fs(){return Be("document")}z.getDocumentOrThrow=fs;function hs(){return Re("document")}var sn=z.getDocument=hs;function ls(){return Be("navigator")}z.getNavigatorOrThrow=ls;function ds(){return Re("navigator")}var Vt=z.getNavigator=ds;function _s(){return Be("location")}z.getLocationOrThrow=_s;function Ds(){return Re("location")}var Ht=z.getLocation=Ds;function bs(){return Be("crypto")}z.getCryptoOrThrow=bs;function Es(){return Re("crypto")}z.getCrypto=Es;function vs(){return Be("localStorage")}z.getLocalStorageOrThrow=vs;function ys(){return Re("localStorage")}z.getLocalStorage=ys;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});var un=Kt.getWindowMetadata=void 0;const cn=z;function gs(){let e,t;try{e=cn.getDocumentOrThrow(),t=cn.getLocationOrThrow()}catch{return null}function r(){const y=e.getElementsByTagName("link"),m=[];for(let g=0;g<y.length;g++){const w=y[g],O=w.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const p=w.getAttribute("href");if(p)if(p.toLowerCase().indexOf("https:")===-1&&p.toLowerCase().indexOf("http:")===-1&&p.indexOf("//")!==0){let U=t.protocol+"//"+t.host;if(p.indexOf("/")===0)U+=p;else{const _=t.pathname.split("/");_.pop();const E=_.join("/");U+=E+"/"+p}m.push(U)}else if(p.indexOf("//")===0){const U=t.protocol+p;m.push(U)}else m.push(p)}}return m}function i(...y){const m=e.getElementsByTagName("meta");for(let g=0;g<m.length;g++){const w=m[g],O=["itemprop","property","name"].map(p=>w.getAttribute(p)).filter(p=>p?y.includes(p):!1);if(O.length&&O){const p=w.getAttribute("content");if(p)return p}}return""}function a(){let y=i("name","og:site_name","og:title","twitter:title");return y||(y=e.title),y}function u(){return i("description","og:description","twitter:description","keywords")}const b=a(),s=u(),d=t.origin,l=r();return{description:s,url:d,icons:l,name:b}}un=Kt.getWindowMetadata=gs;var Ge={},ms=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),fn="%[a-f0-9]{2}",hn=new RegExp("("+fn+")|([^%]+?)","gi"),ln=new RegExp("("+fn+")+","gi");function Wt(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],Wt(r),Wt(i))}function ws(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(hn)||[],r=1;r<t.length;r++)e=Wt(t,r).join(""),t=e.match(hn)||[];return e}}function ps(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=ln.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var i=ws(r[0]);i!==r[0]&&(t[r[0]]=i)}r=ln.exec(e)}t["%C2"]="\uFFFD";for(var a=Object.keys(t),u=0;u<a.length;u++){var b=a[u];e=e.replace(new RegExp(b,"g"),t[b])}return e}var Ss=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return ps(e)}},Os=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},Cs=function(e,t){for(var r={},i=Object.keys(e),a=Array.isArray(t),u=0;u<i.length;u++){var b=i[u],s=e[b];(a?t.indexOf(b)!==-1:t(b,s,e))&&(r[b]=s)}return r};(function(e){const t=ms,r=Ss,i=Os,a=Cs,u=_=>_==null,b=Symbol("encodeFragmentIdentifier");function s(_){switch(_.arrayFormat){case"index":return E=>(c,f)=>{const h=c.length;return f===void 0||_.skipNull&&f===null||_.skipEmptyString&&f===""?c:f===null?[...c,[D(E,_),"[",h,"]"].join("")]:[...c,[D(E,_),"[",D(h,_),"]=",D(f,_)].join("")]};case"bracket":return E=>(c,f)=>f===void 0||_.skipNull&&f===null||_.skipEmptyString&&f===""?c:f===null?[...c,[D(E,_),"[]"].join("")]:[...c,[D(E,_),"[]=",D(f,_)].join("")];case"colon-list-separator":return E=>(c,f)=>f===void 0||_.skipNull&&f===null||_.skipEmptyString&&f===""?c:f===null?[...c,[D(E,_),":list="].join("")]:[...c,[D(E,_),":list=",D(f,_)].join("")];case"comma":case"separator":case"bracket-separator":{const E=_.arrayFormat==="bracket-separator"?"[]=":"=";return c=>(f,h)=>h===void 0||_.skipNull&&h===null||_.skipEmptyString&&h===""?f:(h=h===null?"":h,f.length===0?[[D(c,_),E,D(h,_)].join("")]:[[f,D(h,_)].join(_.arrayFormatSeparator)])}default:return E=>(c,f)=>f===void 0||_.skipNull&&f===null||_.skipEmptyString&&f===""?c:f===null?[...c,D(E,_)]:[...c,[D(E,_),"=",D(f,_)].join("")]}}function d(_){let E;switch(_.arrayFormat){case"index":return(c,f,h)=>{if(E=/\[(\d*)\]$/.exec(c),c=c.replace(/\[\d*\]$/,""),!E){h[c]=f;return}h[c]===void 0&&(h[c]={}),h[c][E[1]]=f};case"bracket":return(c,f,h)=>{if(E=/(\[\])$/.exec(c),c=c.replace(/\[\]$/,""),!E){h[c]=f;return}if(h[c]===void 0){h[c]=[f];return}h[c]=[].concat(h[c],f)};case"colon-list-separator":return(c,f,h)=>{if(E=/(:list)$/.exec(c),c=c.replace(/:list$/,""),!E){h[c]=f;return}if(h[c]===void 0){h[c]=[f];return}h[c]=[].concat(h[c],f)};case"comma":case"separator":return(c,f,h)=>{const n=typeof f=="string"&&f.includes(_.arrayFormatSeparator),o=typeof f=="string"&&!n&&y(f,_).includes(_.arrayFormatSeparator);f=o?y(f,_):f;const S=n||o?f.split(_.arrayFormatSeparator).map(A=>y(A,_)):f===null?f:y(f,_);h[c]=S};case"bracket-separator":return(c,f,h)=>{const n=/(\[\])$/.test(c);if(c=c.replace(/\[\]$/,""),!n){h[c]=f&&y(f,_);return}const o=f===null?[]:f.split(_.arrayFormatSeparator).map(S=>y(S,_));if(h[c]===void 0){h[c]=o;return}h[c]=[].concat(h[c],o)};default:return(c,f,h)=>{if(h[c]===void 0){h[c]=f;return}h[c]=[].concat(h[c],f)}}}function l(_){if(typeof _!="string"||_.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function D(_,E){return E.encode?E.strict?t(_):encodeURIComponent(_):_}function y(_,E){return E.decode?r(_):_}function m(_){return Array.isArray(_)?_.sort():typeof _=="object"?m(Object.keys(_)).sort((E,c)=>Number(E)-Number(c)).map(E=>_[E]):_}function g(_){const E=_.indexOf("#");return E!==-1&&(_=_.slice(0,E)),_}function w(_){let E="";const c=_.indexOf("#");return c!==-1&&(E=_.slice(c)),E}function O(_){_=g(_);const E=_.indexOf("?");return E===-1?"":_.slice(E+1)}function p(_,E){return E.parseNumbers&&!Number.isNaN(Number(_))&&typeof _=="string"&&_.trim()!==""?_=Number(_):E.parseBooleans&&_!==null&&(_.toLowerCase()==="true"||_.toLowerCase()==="false")&&(_=_.toLowerCase()==="true"),_}function U(_,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),l(E.arrayFormatSeparator);const c=d(E),f=Object.create(null);if(typeof _!="string"||(_=_.trim().replace(/^[?#&]/,""),!_))return f;for(const h of _.split("&")){if(h==="")continue;let[n,o]=i(E.decode?h.replace(/\+/g," "):h,"=");o=o===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?o:y(o,E),c(y(n,E),o,f)}for(const h of Object.keys(f)){const n=f[h];if(typeof n=="object"&&n!==null)for(const o of Object.keys(n))n[o]=p(n[o],E);else f[h]=p(n,E)}return E.sort===!1?f:(E.sort===!0?Object.keys(f).sort():Object.keys(f).sort(E.sort)).reduce((h,n)=>{const o=f[n];return Boolean(o)&&typeof o=="object"&&!Array.isArray(o)?h[n]=m(o):h[n]=o,h},Object.create(null))}e.extract=O,e.parse=U,e.stringify=(_,E)=>{if(!_)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),l(E.arrayFormatSeparator);const c=o=>E.skipNull&&u(_[o])||E.skipEmptyString&&_[o]==="",f=s(E),h={};for(const o of Object.keys(_))c(o)||(h[o]=_[o]);const n=Object.keys(h);return E.sort!==!1&&n.sort(E.sort),n.map(o=>{const S=_[o];return S===void 0?"":S===null?D(o,E):Array.isArray(S)?S.length===0&&E.arrayFormat==="bracket-separator"?D(o,E)+"[]":S.reduce(f(o),[]).join("&"):D(o,E)+"="+D(S,E)}).filter(o=>o.length>0).join("&")},e.parseUrl=(_,E)=>{E=Object.assign({decode:!0},E);const[c,f]=i(_,"#");return Object.assign({url:c.split("?")[0]||"",query:U(O(_),E)},E&&E.parseFragmentIdentifier&&f?{fragmentIdentifier:y(f,E)}:{})},e.stringifyUrl=(_,E)=>{E=Object.assign({encode:!0,strict:!0,[b]:!0},E);const c=g(_.url).split("?")[0]||"",f=e.extract(_.url),h=e.parse(f,{sort:!1}),n=Object.assign(h,_.query);let o=e.stringify(n,E);o&&(o=`?${o}`);let S=w(_.url);return _.fragmentIdentifier&&(S=`#${E[b]?D(_.fragmentIdentifier,E):_.fragmentIdentifier}`),`${c}${o}${S}`},e.pick=(_,E,c)=>{c=Object.assign({parseFragmentIdentifier:!0,[b]:!1},c);const{url:f,query:h,fragmentIdentifier:n}=e.parseUrl(_,c);return e.stringifyUrl({url:f,query:a(h,E),fragmentIdentifier:n},c)},e.exclude=(_,E,c)=>{const f=Array.isArray(E)?h=>!E.includes(h):(h,n)=>!E(h,n);return e.pick(_,f,c)}})(Ge);var As=Object.defineProperty,dn=Object.getOwnPropertySymbols,Ns=Object.prototype.hasOwnProperty,Us=Object.prototype.propertyIsEnumerable,_n=(e,t,r)=>t in e?As(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dn=(e,t)=>{for(var r in t||(t={}))Ns.call(t,r)&&_n(e,r,t[r]);if(dn)for(var r of dn(t))Us.call(t,r)&&_n(e,r,t[r]);return e};const bn="ReactNative",$e={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ft=" ",Ts=":",En="/",qt=2,Is=1e3,vn="js";function zt(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function yn(){return!sn()&&!!Vt()&&navigator.product===bn}function gn(){return!zt()&&!!Vt()}function Yt(){return yn()?$e.reactNative:zt()?$e.node:gn()?$e.browser:$e.unknown}function mn(e,t){let r=Ge.parse(e);return r=Dn(Dn({},r),t),e=Ge.stringify(r),e}function Rs(){return un()||{name:"",description:"",url:"",icons:[""]}}function Ps(e,t){var r;const i=Yt(),a={protocol:e,version:t,env:i};return i==="browser"&&(a.host=((r=Ht())==null?void 0:r.host)||"unknown"),a}function wn(){const e=Io();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function pn(){var e;const t=Yt();return t===$e.browser?[t,((e=Ht())==null?void 0:e.host)||"unknown"].join(":"):t}function Sn(e,t,r){const i=wn(),a=pn();return[[e,t].join("-"),[vn,r].join("-"),i,a].join("/")}function Fs({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:a,projectId:u,useOnCloseEvent:b}){const s=r.split("?"),d=Sn(e,t,i),l={auth:a,ua:d,projectId:u,useOnCloseEvent:b||void 0},D=mn(s[1]||"",l);return s[0]+"?"+D}function Ms(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,r].join("://")}function js(e,t,r){if(!e[t]||typeof e[t]!==r)throw new Error(`Missing or invalid "${t}" param`)}function On(e,t=qt){return Cn(e.split(En),t)}function Ls(e){return On(e).join(ft)}function Ce(e,t){return e.filter(r=>t.includes(r)).length===e.length}function Cn(e,t=qt){return e.slice(Math.max(e.length-t,0))}function Bs(e){return Object.fromEntries(e.entries())}function $s(e){return new Map(Object.entries(e))}function Vs(e,t){const r={};return Object.keys(e).forEach(i=>{r[i]=t(e[i])}),r}const Hs=e=>e;function An(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function Ks(e){return e.split(ft).map(t=>An(t)).join(ft)}function Ws(e=Ue.FIVE_MINUTES,t){const r=Ue.toMiliseconds(e||Ue.FIVE_MINUTES);let i,a,u;return{resolve:b=>{u&&i&&(clearTimeout(u),i(b))},reject:b=>{u&&a&&(clearTimeout(u),a(b))},done:()=>new Promise((b,s)=>{u=setTimeout(()=>{s(new Error(t))},r),i=b,a=s})}}function qs(e,t,r){return new Promise(async(i,a)=>{const u=setTimeout(()=>a(new Error(r)),t);try{const b=await e;i(b)}catch(b){a(b)}clearTimeout(u)})}function Gt(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function zs(e){return Gt("topic",e)}function Ys(e){return Gt("id",e)}function Gs(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")i.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function xs(e,t){return Ue.fromMiliseconds((t||Date.now())+Ue.toMiliseconds(e))}function ks(e){return Date.now()>=Ue.toMiliseconds(e)}function Xs(e,t){return`${e}${t?`:${t}`:""}`}function Ae(e=[],t=[]){return[...new Set([...e,...t])]}const Js={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},Nn="irn";function Qs(e){return e?.relay||{protocol:Nn}}function Zs(e){const t=Js[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var eu=Object.defineProperty,Un=Object.getOwnPropertySymbols,tu=Object.prototype.hasOwnProperty,ru=Object.prototype.propertyIsEnumerable,Tn=(e,t,r)=>t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nu=(e,t)=>{for(var r in t||(t={}))tu.call(t,r)&&Tn(e,r,t[r]);if(Un)for(var r of Un(t))ru.call(t,r)&&Tn(e,r,t[r]);return e};function In(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach(a=>{if(a.startsWith(i)){const u=a.replace(i,""),b=e[a];r[u]=b}}),r}function iu(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,i=e.substring(0,t),a=e.substring(t+1,r).split("@"),u=typeof r<"u"?e.substring(r):"",b=Ge.parse(u);return{protocol:i,topic:a[0],version:parseInt(a[1],10),symKey:b.symKey,relay:In(b)}}function Rn(e,t="-"){const r="relay",i={};return Object.keys(e).forEach(a=>{const u=r+t+a;e[a]&&(i[u]=e[a])}),i}function au(e){return`${e.protocol}:${e.topic}@${e.version}?`+Ge.stringify(nu({symKey:e.symKey},Rn(e.relay)))}var ou=Object.defineProperty,su=Object.defineProperties,uu=Object.getOwnPropertyDescriptors,Pn=Object.getOwnPropertySymbols,cu=Object.prototype.hasOwnProperty,fu=Object.prototype.propertyIsEnumerable,Fn=(e,t,r)=>t in e?ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hu=(e,t)=>{for(var r in t||(t={}))cu.call(t,r)&&Fn(e,r,t[r]);if(Pn)for(var r of Pn(t))fu.call(t,r)&&Fn(e,r,t[r]);return e},lu=(e,t)=>su(e,uu(t));function Pe(e){const t=[];return e.forEach(r=>{const[i,a]=r.split(":");t.push(`${i}:${a}`)}),t}function Mn(e){const t=[];return Object.values(e).forEach(r=>{t.push(...Pe(r.accounts))}),t}function jn(e,t){const r=[];return Object.values(e).forEach(i=>{Pe(i.accounts).includes(t)&&r.push(...i.methods)}),r}function Ln(e,t){const r=[];return Object.values(e).forEach(i=>{Pe(i.accounts).includes(t)&&r.push(...i.events)}),r}function du(e,t){const r=zn(e,t);if(r)throw new Error(r.message);const i={};for(const[a,u]of Object.entries(e))i[a]={methods:u.methods,events:u.events,chains:u.accounts.map(b=>`${b.split(":")[0]}:${b.split(":")[1]}`)};return i}function _u(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:r={}},supportedNamespaces:i}=e,a=kt(t),u=kt(r),b={};Object.keys(i).forEach(l=>{const D=i[l].chains,y=i[l].methods,m=i[l].events,g=i[l].accounts;b[l]={chains:D,methods:y,events:m,accounts:g}});const s=Gn(t,b,"approve()");if(s)throw new Error(s.message);const d={};return Object.keys(a).forEach(l=>{const D=i[l].chains.filter(w=>{var O,p;return(p=(O=a[l])==null?void 0:O.chains)==null?void 0:p.includes(w)}),y=i[l].methods.filter(w=>{var O,p;return(p=(O=a[l])==null?void 0:O.methods)==null?void 0:p.includes(w)}),m=i[l].events.filter(w=>{var O,p;return(p=(O=a[l])==null?void 0:O.events)==null?void 0:p.includes(w)}),g=D.map(w=>i[l].accounts.filter(O=>O.includes(w))).flat();d[l]={chains:D,methods:y,events:m,accounts:g}}),Object.keys(u).forEach(l=>{var D,y,m,g,w,O;if(!i[l])return;const p=(y=(D=u[l])==null?void 0:D.chains)==null?void 0:y.filter(c=>i[l].chains.includes(c)),U=i[l].methods.filter(c=>{var f,h;return(h=(f=u[l])==null?void 0:f.methods)==null?void 0:h.includes(c)}),_=i[l].events.filter(c=>{var f,h;return(h=(f=u[l])==null?void 0:f.events)==null?void 0:h.includes(c)}),E=p?.map(c=>i[l].accounts.filter(f=>f.includes(c))).flat();d[l]={chains:Ae((m=d[l])==null?void 0:m.chains,p),methods:Ae((g=d[l])==null?void 0:g.methods,U),events:Ae((w=d[l])==null?void 0:w.events,_),accounts:Ae((O=d[l])==null?void 0:O.accounts,E)}}),d}function xt(e){return e.includes(":")}function Bn(e){return xt(e)?e.split(":")[0]:e}function kt(e){var t,r,i;const a={};if(!ht(e))return a;for(const[u,b]of Object.entries(e)){const s=xt(u)?[u]:b.chains,d=b.methods||[],l=b.events||[],D=Bn(u);a[D]=lu(hu({},a[D]),{chains:Ae(s,(t=a[D])==null?void 0:t.chains),methods:Ae(d,(r=a[D])==null?void 0:r.methods),events:Ae(l,(i=a[D])==null?void 0:i.events)})}return a}const Du={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},bu={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function pe(e,t){const{message:r,code:i}=bu[e];return{message:t?`${r} ${t}`:r,code:i}}function Fe(e,t){const{message:r,code:i}=Du[e];return{message:t?`${r} ${t}`:r,code:i}}function xe(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function ht(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ne(e){return typeof e>"u"}function ve(e,t){return t&&Ne(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function lt(e,t){return t&&Ne(e)?!0:typeof e=="number"&&!isNaN(e)}function Eu(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),a=Object.keys(r);let u=!0;return Ce(a,i)?(i.forEach(b=>{const{accounts:s,methods:d,events:l}=e.namespaces[b],D=Pe(s),y=r[b];(!Ce(Xe(b,y),D)||!Ce(y.methods,d)||!Ce(y.events,l))&&(u=!1)}),u):!1}function dt(e){return ve(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function $n(e){if(ve(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&dt(r)}}return!1}function vu(e){if(ve(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function yu(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function gu(e){return e?.topic}function mu(e,t){let r=null;return ve(e?.publicKey,!1)||(r=pe("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Xt(e){let t=!0;return xe(e)?e.length&&(t=e.every(r=>ve(r,!1))):t=!1,t}function Vn(e,t,r){let i=null;return xe(t)?t.forEach(a=>{i||(!dt(a)||!a.includes(e))&&(i=Fe("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):i=Fe("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),i}function Hn(e,t){let r=null;return Object.entries(e).forEach(([i,a])=>{if(r)return;const u=Vn(i,Xe(i,a),`${t} requiredNamespace`);u&&(r=u)}),r}function Kn(e,t){let r=null;return xe(e)?e.forEach(i=>{r||$n(i)||(r=Fe("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=Fe("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Wn(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=Kn(i?.accounts,`${t} namespace`);a&&(r=a)}),r}function qn(e,t){let r=null;return Xt(e?.methods)?Xt(e?.events)||(r=Fe("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Fe("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Jt(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=qn(i,`${t}, namespace`);a&&(r=a)}),r}function wu(e,t,r){let i=null;if(e&&ht(e)){const a=Jt(e,t);a&&(i=a);const u=Hn(e,t);u&&(i=u)}else i=pe("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}function zn(e,t){let r=null;if(e&&ht(e)){const i=Jt(e,t);i&&(r=i);const a=Wn(e,t);a&&(r=a)}else r=pe("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Yn(e){return ve(e.protocol,!0)}function pu(e,t){let r=!1;return t&&!e?r=!0:e&&xe(e)&&e.length&&e.forEach(i=>{r=Yn(i)}),r}function Su(e){return typeof e=="number"}function Ou(e){return typeof e<"u"&&typeof e!==null}function Cu(e){return!(!e||typeof e!="object"||!e.code||!lt(e.code,!1)||!e.message||!ve(e.message,!1))}function Au(e){return!(Ne(e)||!ve(e.method,!1))}function Nu(e){return!(Ne(e)||Ne(e.result)&&Ne(e.error)||!lt(e.id,!1)||!ve(e.jsonrpc,!1))}function Uu(e){return!(Ne(e)||!ve(e.name,!1))}function Tu(e,t){return!(!dt(t)||!Mn(e).includes(t))}function Iu(e,t,r){return ve(r,!1)?jn(e,t).includes(r):!1}function Ru(e,t,r){return ve(r,!1)?Ln(e,t).includes(r):!1}function Gn(e,t,r){let i=null;const a=Pu(e),u=Fu(t),b=Object.keys(a),s=Object.keys(u),d=xn(Object.keys(e)),l=xn(Object.keys(t)),D=d.filter(y=>!l.includes(y));return D.length&&(i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${D.toString()}
      Received: ${Object.keys(t).toString()}`)),Ce(b,s)||(i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${b.toString()}
      Approved: ${s.toString()}`)),Object.keys(t).forEach(y=>{if(!y.includes(":")||i)return;const m=Pe(t[y].accounts);m.includes(y)||(i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${y}
        Required: ${y}
        Approved: ${m.toString()}`))}),b.forEach(y=>{i||(Ce(a[y].methods,u[y].methods)?Ce(a[y].events,u[y].events)||(i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${y}`)):i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${y}`))}),i}function Pu(e){const t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:(i=e[r].chains)==null||i.forEach(a=>{t[a]={methods:e[r].methods,events:e[r].events}})}),t}function xn(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Fu(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const i=Pe(e[r].accounts);i?.forEach(a=>{t[a]={accounts:e[r].accounts.filter(u=>u.includes(`${a}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function Mu(e,t){return lt(e,!1)&&e<=t.max&&e>=t.min}v.BASE10=Nt,v.BASE16=Ee,v.BASE64=st,v.COLON=Ts,v.DEFAULT_DEPTH=qt,v.EMPTY_SPACE=ft,v.ENV_MAP=$e,v.ONE_THOUSAND=Is,v.REACT_NATIVE_PRODUCT=bn,v.RELAYER_DEFAULT_PROTOCOL=Nn,v.SDK_TYPE=vn,v.SLASH=En,v.TYPE_0=Ut,v.TYPE_1=je,v.UTF8=ut,v.appendToQueryString=mn,v.assertType=js,v.buildApprovedNamespaces=_u,v.calcExpiry=xs,v.capitalize=Ks,v.capitalizeWord=An,v.createDelayedPromise=Ws,v.createExpiringPromise=qs,v.decodeTypeByte=We,v.decrypt=go,v.deriveSymKey=bo,v.deserialize=Rt,v.encodeTypeByte=Kr,v.encrypt=yo,v.engineEvent=Xs,v.enumify=Hs,v.formatAccountId=tr,v.formatAccountWithChain=Xn,v.formatChainId=er,v.formatExpirerTarget=Gt,v.formatIdTarget=Ys,v.formatMessage=ri,v.formatMessageContext=Ls,v.formatRelayParams=Rn,v.formatRelayRpcUrl=Fs,v.formatTopicTarget=zs,v.formatUA=Sn,v.formatUri=au,v.generateKeyPair=_o,v.generateRandomBytes32=Do,v.getAccountsChains=Pe,v.getAccountsFromNamespaces=Qn,v.getAddressFromAccount=rr,v.getAddressesFromAccounts=Jn,v.getAppMetadata=Rs,v.getChainFromAccount=nr,v.getChainsFromAccounts=ir,v.getChainsFromNamespace=Xe,v.getChainsFromNamespaces=Zn,v.getChainsFromRequiredNamespaces=ei,v.getDidAddress=or,v.getDidAddressSegments=Je,v.getDidChainId=ar,v.getEnvironment=Yt,v.getHttpUrl=Ms,v.getInternalError=pe,v.getJavascriptID=pn,v.getJavascriptOS=wn,v.getLastItems=Cn,v.getNamespacedDidChainId=ti,v.getNamespacesChains=Mn,v.getNamespacesEventsForChainId=Ln,v.getNamespacesMethodsForChainId=jn,v.getRelayClientMetadata=Ps,v.getRelayProtocolApi=Zs,v.getRelayProtocolName=Qs,v.getRequiredNamespacesFromNamespaces=du,v.getSdkError=Fe,v.getUniqueValues=bt,v.hasOverlap=Ce,v.hashKey=Eo,v.hashMessage=vo,v.isBrowser=gn,v.isCaipNamespace=xt,v.isConformingNamespaces=Gn,v.isExpired=ks,v.isNode=zt,v.isProposalStruct=yu,v.isReactNative=yn,v.isSessionCompatible=Eu,v.isSessionStruct=gu,v.isTypeOneEnvelope=wo,v.isUndefined=Ne,v.isValidAccountId=$n,v.isValidAccounts=Kn,v.isValidActions=qn,v.isValidArray=xe,v.isValidChainId=dt,v.isValidChains=Vn,v.isValidController=mu,v.isValidErrorReason=Cu,v.isValidEvent=Uu,v.isValidId=Su,v.isValidNamespaceAccounts=Wn,v.isValidNamespaceActions=Jt,v.isValidNamespaceChains=Hn,v.isValidNamespaceMethodsOrEvents=Xt,v.isValidNamespaces=zn,v.isValidNamespacesChainId=Tu,v.isValidNamespacesEvent=Ru,v.isValidNamespacesRequest=Iu,v.isValidNumber=lt,v.isValidObject=ht,v.isValidParams=Ou,v.isValidRelay=Yn,v.isValidRelays=pu,v.isValidRequest=Au,v.isValidRequestExpiry=Mu,v.isValidRequiredNamespaces=wu,v.isValidResponse=Nu,v.isValidString=ve,v.isValidUrl=vu,v.mapEntries=Vs,v.mapToObj=Bs,v.mergeArrays=Ae,v.normalizeNamespaces=kt,v.objToMap=$s,v.parseAccountId=Dt,v.parseChainId=Zt,v.parseContextNames=On,v.parseExpirerTarget=Gs,v.parseNamespaceKey=Bn,v.parseRelayParams=In,v.parseUri=iu,v.serialize=Wr,v.validateDecoding=mo,v.validateEncoding=qr,Object.defineProperty(v,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
